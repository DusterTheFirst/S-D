/*! For license information please see main.360444d0.chunk.js.LICENSE.txt */
(this.webpackJsonpsd=this.webpackJsonpsd||[]).push([[0],{48:function(e,t,n){e.exports=n(85)},85:function(e,t,n){"use strict";n.r(t);n(49);var r=n(0),o=n.n(r),a=n(19),c=n.n(a),i=n(14),l=n.n(i),u=n(6),s=n(13),p=n(8),d=n.n(p),f=n(10),m=n(20),g=n.n(m),v=n(1),b=n(2);function h(){var e=Object(v.a)(["\n    grid-column: 3;\n\n    overflow-y: auto;\n    overflow-x: hidden;\n    scrollbar-width: none;\n"]);return h=function(){return e},e}function x(){var e=Object(v.a)(["\n    position: absolute;\n\n    top: 0;\n    left: 0;\n    bottom: 0;\n    right: 0;\n\n    display: grid;\n    grid-template-columns: 250px auto 300px;\n    grid-template-rows: 100%;\n    grid-column-gap: 3px;\n\n    min-width: 800px;\n    height: 100%;\n    width: 100%;\n\n    background: #202020;\n"]);return x=function(){return e},e}var y=b.b.div(x()),E=b.b.div(h());function O(e){return w.apply(this,arguments)}function w(){return(w=Object(f.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var r=new Image;r.src=t,r.onload=function(){return e(r)},r.onerror=n})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function j(e){return C.apply(this,arguments)}function C(){return(C=Object(f.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){t.toBlob((function(t){return null===t?n():e(t)}),"image/png")})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var k,S,A,D,G,N,I,_,T,z,R,F,M=n(21),P=n(7),L=n(15),W=n(25),U=n(26),H=n(9),B=(n(42),n(5)),J=n(16),Y=n(11),$=(k=Object(s.persist)("object"),S=Object(s.persist)("list"),A=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];Object(W.a)(this,e),Object(L.a)(this,"name",D,this),Object(L.a)(this,"defaults",G,this),Object(L.a)(this,"_cards",N,this),this.name=t,this._cards=r,this.defaults=n}return Object(U.a)(e,[{key:"addCard",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{name:"New Card ".concat(this._cards.length)};return this._cards.push(e)-1}},{key:"moveCard",value:function(e,t){var n=this._cards.splice(e,1),r=Object(u.a)(n,1)[0];return this._cards.splice(t,0,r),this}},{key:"removeCard",value:function(e){return this._cards.splice(e,1)[0]}},{key:"editCard",value:function(e,t,n){this._cards[e]=Object.entries(Object(Y.a)({},this._cards[e],Object(J.a)({},t,n))).filter((function(e){return void 0!==Object(u.a)(e,2)[1]})).reduce((function(e,t){var n=Object(u.a)(t,2),r=n[0],o=n[1];return Object(Y.a)({},e,Object(J.a)({},r,o))}),{})}},{key:"editDefaults",value:function(e,t){this.defaults=Object.entries(Object(Y.a)({},this.defaults,Object(J.a)({},e,t))).filter((function(e){return void 0!==Object(u.a)(e,2)[1]})).reduce((function(e,t){var n=Object(u.a)(t,2),r=n[0],o=n[1];return Object(Y.a)({},e,Object(J.a)({},r,o))}),{})}},{key:"editName",value:function(e){this.name=e}},{key:"data",get:function(){return{cards:this._cards,defaults:this.defaults,name:this.name}}},{key:"cards",get:function(){var e=this;return this._cards.map((function(t){return Object(Y.a)({},e.defaults,{},t)}))}},{key:"rawCards",get:function(){return this._cards}}],[{key:"fromData",value:function(t){return new e(t.name,t.defaults,t.cards)}}]),e}(),D=Object(H.a)(A.prototype,"name",[B.observable,s.persist],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),G=Object(H.a)(A.prototype,"defaults",[B.observable,k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),N=Object(H.a)(A.prototype,"_cards",[B.observable,S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Object(H.a)(A.prototype,"addCard",[B.action],Object.getOwnPropertyDescriptor(A.prototype,"addCard"),A.prototype),Object(H.a)(A.prototype,"moveCard",[B.action],Object.getOwnPropertyDescriptor(A.prototype,"moveCard"),A.prototype),Object(H.a)(A.prototype,"removeCard",[B.action],Object.getOwnPropertyDescriptor(A.prototype,"removeCard"),A.prototype),Object(H.a)(A.prototype,"editCard",[B.action],Object.getOwnPropertyDescriptor(A.prototype,"editCard"),A.prototype),Object(H.a)(A.prototype,"editDefaults",[B.action],Object.getOwnPropertyDescriptor(A.prototype,"editDefaults"),A.prototype),Object(H.a)(A.prototype,"editName",[B.action],Object.getOwnPropertyDescriptor(A.prototype,"editName"),A.prototype),A);!function(e){e.None="none",e.Group="group",e.Card="card"}(F||(F={}));var V=(I=Object(s.persist)("object"),_=Object(s.persist)("list",$),T=function(){function e(){Object(W.a)(this,e),Object(L.a)(this,"_selection",z,this),Object(L.a)(this,"_groups",R,this)}return Object(U.a)(e,[{key:"select",value:function(e,t){this._selection=void 0===e?{type:F.None}:void 0===t?{group:e,type:F.Group}:{card:t,group:e,type:F.Card}}},{key:"setSelection",value:function(e){this._selection=e}},{key:"addGroup",value:function(e){return this._groups.push(e)-1}},{key:"removeGroup",value:function(e){return this._groups.splice(e,1)[0]}},{key:"moveGroup",value:function(e,t){var n=this._groups.splice(e,1),r=Object(u.a)(n,1)[0];this._groups.splice(t,0,r)}},{key:"selection",get:function(){return this._selection}},{key:"groups",get:function(){return this._groups}},{key:"groupsData",get:function(){return this._groups.map((function(e){return e.data}))}}]),e}(),z=Object(H.a)(T.prototype,"_selection",[B.observable,I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{type:F.None}}}),R=Object(H.a)(T.prototype,"_groups",[B.observable,_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Object(H.a)(T.prototype,"select",[B.action],Object.getOwnPropertyDescriptor(T.prototype,"select"),T.prototype),Object(H.a)(T.prototype,"setSelection",[B.action],Object.getOwnPropertyDescriptor(T.prototype,"setSelection"),T.prototype),Object(H.a)(T.prototype,"addGroup",[B.action],Object.getOwnPropertyDescriptor(T.prototype,"addGroup"),T.prototype),Object(H.a)(T.prototype,"removeGroup",[B.action],Object.getOwnPropertyDescriptor(T.prototype,"removeGroup"),T.prototype),Object(H.a)(T.prototype,"moveGroup",[B.action],Object.getOwnPropertyDescriptor(T.prototype,"moveGroup"),T.prototype),T),K=Object(r.createContext)(new V);function Q(){var e=Object(v.a)([""]);return Q=function(){return e},e}function q(){var e=Object(v.a)([""]);return q=function(){return e},e}function X(){var e=Object(v.a)(["\n    width: 300px;\n    height: calc(300px * 7/5);\n\n    user-select: none;\n"]);return X=function(){return e},e}var Z=b.b.svg.attrs({fontFamily:"Modesto",height:700,version:"1.1",viewBox:"0 0 50 70",width:500,xmlns:"http://www.w3.org/2000/svg"})(X()),ee=b.b.text.attrs((function(e){var t,n;return{fontSize:null!==(t=e.fontSize)&&void 0!==t?t:2,textAnchor:null!==(n=e.textAnchor)&&void 0!==n?n:"middle"}}))(q()),te=Object(b.b)(ee).attrs({fontFamily:"Modesto-Expd"})(Q());function ne(e){return e.replace(/^(\*|-)(?= )/gim,"\u2022")}function re(e){for(var t=0,n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n),t|=0;return t}var oe=n(47);function ae(e){return ce.apply(this,arguments)}function ce(){return(ce=Object(f.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var r=new FileReader;r.readAsText(t),r.onload=function(t){null!==r.result?e(r.result.toString()):n(new Error("No result"))},r.onerror=n})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ie(e){return le.apply(this,arguments)}function le(){return(le=Object(f.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var r=new FileReader;r.readAsDataURL(t),r.onload=function(t){null!==r.result?e(r.result.toString()):n(new Error("No result"))},r.onerror=n})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ue(e,t){Object(oe.saveAs)(new Blob([JSON.stringify(e)],{type:"application/json"}),t)}function se(e,t){if(e.type===F.None){var n,r=Object(M.a)(e.data);try{for(r.s();!(n=r.n()).done;){var o=n.value;t.addGroup($.fromData(o))}}catch(i){r.e(i)}finally{r.f()}}else if(e.type===F.Group){var a=t.addGroup($.fromData(e.data));t.select(a)}else if(t.selection.type===F.Card||t.selection.type===F.Group){var c=t.groups[t.selection.group].addCard(e.data);t.select(t.selection.group,c)}else alert("Attempted to add a card when no group is selected")}function pe(){var e=Object(r.useState)(),t=Object(u.a)(e,2),n=t[0],a=t[1];if(Object(r.useEffect)((function(){Promise.all([fetch("/fonts/Modesto-Expd.woff2").then((function(e){return e.blob()})).then(ie),fetch("/fonts/Modesto-Regular.woff2").then((function(e){return e.blob()})).then(ie)]).then((function(e){var t=Object(u.a)(e,2),n=t[0],r=t[1];a([n,r])})).catch((function(e){return console.error(e)}))}),[]),void 0===n)return null;var c=Object(u.a)(n,2),i=c[0],l=c[1],s='\n        @font-face {\n            font-family: "Modesto-Expd";\n            src: url("'.concat(i,'");\n        }\n\n        @font-face {\n            font-family: "Modesto-Regular";\n            src: url("').concat(l,'");\n        }\n    ');return o.a.createElement("style",null,s)}function de(){var e=Object(r.useContext)(K),t=Object(r.useContext)(en),n=Object(u.a)(t,1)[0],a=Object(P.b)((function(){return e.selection.type===F.Card?e.groups[e.selection.group].cards[e.selection.card]:e.selection.type===F.Group?e.groups[e.selection.group].defaults:{name:"No Selection"}})),c=Object(r.useMemo)((function(){var e;return re(null!==(e=a.image)&&void 0!==e?e:"")}),[a.image]);return Object(P.b)((function(){var e,t=null!==(e=a.color)&&void 0!==e?e:"#000000";return o.a.createElement(o.a.Fragment,null,o.a.createElement("rect",{width:"50",height:"70",fill:t}),o.a.createElement("rect",{width:"46",height:"66",x:"2",y:"2",rx:"2",ry:"2",fill:"white"}),o.a.createElement("rect",{width:"40",height:"60",x:"5",y:"5",rx:"2",ry:"2",stroke:t,strokeWidth:"0.5",fill:"transparent"}),o.a.createElement("polyline",{points:"5.25,35 25,5.25 45,34.75 25,64.75 5.25,35",fill:"transparent",stroke:t,strokeWidth:".5"}),o.a.createElement("text",{fontSize:"10",fontWeight:"bold",fill:t,x:"38",y:"15",textAnchor:"middle"},a.level),o.a.createElement("text",{fontSize:"10",fontWeight:"bold",fill:t,x:"12",y:"62",textAnchor:"middle"},a.level),n?o.a.createElement("image",{href:a.image,width:"25",height:"25",x:"12.5",y:"22.5"}):o.a.createElement("use",{href:"#".concat(c)}))}))}function fe(){var e=Object(r.useContext)(K);return Object(P.b)((function(){var t,n=new Map,r=Object(M.a)(e.groups);try{for(r.s();!(t=r.n()).done;){var a,c=t.value,i=Object(M.a)(c.cards);try{for(i.s();!(a=i.n()).done;){var l=a.value;if(void 0!==l.image){var u=re(l.image);n.has(u)||n.set(u,o.a.createElement("image",{key:u,id:u.toString(),href:l.image,width:"25",height:"25",x:"12.5",y:"22.5"}))}}}catch(s){i.e(s)}finally{i.f()}}}catch(s){r.e(s)}finally{r.f()}return o.a.createElement(o.a.Fragment,null,Array.from(n.values()))}))}var me=Object(r.forwardRef)((function(e,t){var n=Object(r.useContext)(en),a=Object(u.a)(n,1)[0];return o.a.createElement(Z,{ref:t},o.a.createElement("defs",null,a?null:o.a.createElement(fe,null),o.a.createElement(pe,null)),o.a.createElement(de,null))}));function ge(e,t,n){return e.replace("\r","").split("\n").map((function(e,r){return function(e,t,n){var r,o,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],c=e.split(" "),i=0,l=document.createElementNS("http://www.w3.org/2000/svg","tspan"),u=document.createTextNode(c[0]);if(a){var s,p;l.setAttribute("x",n.x.baseVal[0].valueAsString),l.setAttribute("dy",null!==(s=null===(p=n.attributes.getNamedItem("font-size"))||void 0===p?void 0:p.value)&&void 0!==s?s:""),i++}if(l.appendChild(u),n.appendChild(l),!c.some((function(e){return e.length>0}))){var d,f;return l.textContent=" ",parseFloat(null!==(d=null===(f=n.attributes.getNamedItem("font-size"))||void 0===f?void 0:f.value)&&void 0!==d?d:"0")}for(var m=1;m<c.length;m++){var g,v,b,h;if(null===l.firstChild||null===l.firstChild.textContent)return console.error("TSPAN element has no first child",l),i*parseFloat(null!==(b=null===(h=n.attributes.getNamedItem("font-size"))||void 0===h?void 0:h.value)&&void 0!==b?b:"0");var x,y,E=null===(g=l.firstChild)||void 0===g||null===(v=g.textContent)||void 0===v?void 0:v.length;if(l.firstChild.textContent+=" ".concat(c[m]),l.getComputedTextLength()>t)l.firstChild.textContent=l.firstChild.textContent.slice(0,E),(l=document.createElementNS("http://www.w3.org/2000/svg","tspan")).setAttribute("x",n.x.baseVal[0].valueAsString),l.setAttribute("dy",null!==(x=null===(y=n.attributes.getNamedItem("font-size"))||void 0===y?void 0:y.value)&&void 0!==x?x:""),u=document.createTextNode(c[m]),l.appendChild(u),n.appendChild(l),i++}return i*parseFloat(null!==(r=null===(o=n.attributes.getNamedItem("font-size"))||void 0===o?void 0:o.value)&&void 0!==r?r:"0")}(e,t,n,0!==r)})).reduce((function(e,t){return e+t}))}var ve=Object(r.forwardRef)((function(e,t){var n=Object(r.useContext)(K),a=Object(r.useRef)(null),c=Object(r.useRef)(null),i=Object(r.useRef)(null),l=Object(r.useRef)(null),u=Object(r.useRef)(null),s=Object(P.b)((function(){return n.selection.type===F.Card?n.groups[n.selection.group].cards[n.selection.card]:n.selection.type===F.Group?Object(Y.a)({name:n.groups[n.selection.group].name},n.groups[n.selection.group].defaults):{name:"No Selection"}}));return Object(r.useEffect)((function(){var e=0,t=a.current,n=c.current,r=i.current,o=l.current,p=u.current;if(null!==n)if(void 0!==s.physicalComponents&&null!==t){var d=ge(ne(s.physicalComponents),44,t);n.setAttribute("height",(d+4).toString()),n.removeAttribute("display"),e+=d+3.5}else n.setAttribute("display","none");void 0!==s.description&&null!==r&&(r.setAttribute("dy",e.toString()),e+=ge(ne(s.description),44,r));if(null!==p)if(void 0!==s.extDescription&&null!==o){var f=ge(ne(s.extDescription),44,o);o.setAttribute("y",(65-f).toString()),p.setAttribute("transform","translate(0, ".concat(62-f,")")),p.removeAttribute("display")}else p.setAttribute("display","none");return function(){null!==t&&(t.innerHTML=""),null!==r&&(r.innerHTML=""),null!==o&&(o.innerHTML="")}}),[s,i,l,u,c,a]),Object(P.b)((function(){var e,n,r,p,d=void 0!==s.duration&&null!==s.duration.toLowerCase().match(/^concentration(,)? /),f=d?null===(e=s.duration)||void 0===e?void 0:e.replace(/^concentration(,)? /i,""):s.duration,m="".concat(null!==(n=null===f||void 0===f?void 0:f.charAt(0).toUpperCase())&&void 0!==n?n:"").concat(null!==(r=null===f||void 0===f?void 0:f.slice(1))&&void 0!==r?r:""),g=parseInt(void 0!==s.level?s.level:"0",10),v=isNaN(g)?void 0:0===g?"".concat(s.type," cantrip"):"".concat(function(e){var t=e%10,n=e%100;return"".concat(e,1===t&&11!==n?"st":2===t&&12!==n?"nd":3===t&&13!==n?"rd":"th")}(g)," level ").concat(s.type),b=null!==(p=s.color)&&void 0!==p?p:"#000000";return o.a.createElement(Z,{ref:t},o.a.createElement("defs",null,o.a.createElement(pe,null)),o.a.createElement("rect",{width:"50",height:"70",fill:b}),o.a.createElement("rect",{width:"46",height:"64",x:"2",y:"2",rx:"2",ry:"2",fill:"white"}),o.a.createElement("line",{x1:"0",y1:"9",x2:"50",y2:"9",stroke:b,strokeWidth:".3"}),o.a.createElement("line",{x1:"0",y1:"16",x2:"50",y2:"16",stroke:b,strokeWidth:".3"}),o.a.createElement("line",{x1:"0",y1:"23",x2:"50",y2:"23",stroke:b,strokeWidth:".3"}),o.a.createElement("line",{x1:"25",y1:"9",x2:"25",y2:"23",stroke:b,strokeWidth:".3"}),o.a.createElement(te,{fontSize:"4",x:"25",y:"6.75"},s.name),o.a.createElement(te,{fill:b,x:"13.5",y:"12"},"CASTING TIME"),o.a.createElement(ee,{x:"13.5",y:"14.6"},s.castingTime),o.a.createElement(te,{fill:b,x:"36.5",y:"12"},"RANGE"),o.a.createElement(ee,{x:"36.5",y:"14.6"},s.range),o.a.createElement(te,{fill:b,x:"13.5",y:"19"},"COMPONENTS"),o.a.createElement(ee,{x:"13.5",y:"21.6"},s.components),o.a.createElement(te,{fill:b,x:"36.5",y:"19"},"DURATION"),o.a.createElement(ee,{x:"36.5",y:"21.6"},m),o.a.createElement("g",{display:d?void 0:"none"},o.a.createElement("polygon",{points:"45.5,17 43.5,19.5 45.5,22 47.5,19.5 45.5,17",fill:b}),o.a.createElement(te,{x:"45.5",y:"19.5",dominantBaseline:"middle",fill:"#ffffff"},"C")),o.a.createElement("rect",{width:"50",height:"3.5",y:"23",fill:b,ref:c}),o.a.createElement(ee,{x:"3",y:"25.6",ref:a,fill:"#ffffff",textAnchor:"right"}),o.a.createElement(ee,{x:"3",y:"25.5",ref:i,textAnchor:"right"}),o.a.createElement("g",{ref:u},o.a.createElement("rect",{width:"50",height:"3.5",y:"-3",fill:b}),o.a.createElement(ee,{fontWeight:"bold",letterSpacing:".1",y:"-.4",x:"25",fill:"#ffffff"},"At Higher Levels")),o.a.createElement(ee,{x:"3",ref:l,textAnchor:"right"}),o.a.createElement(te,{fill:"white",x:"2.5",y:"68.5",textAnchor:"left"},s.clazz),o.a.createElement(ee,{fill:"white",x:"48",y:"68.5",textAnchor:"end"},v))}))})),be=Object(r.forwardRef)((function(e,t){var n=Object(r.useRef)(null),a=Object(r.useRef)(null);return Object(r.useImperativeHandle)(t,(function(){return{render:function(){var e=Object(f.a)(d.a.mark((function e(){var t,r,o,c,i,l,u,s=arguments;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=s.length>0&&void 0!==s[0]?s[0]:new g.a,null!==n.current&&null!==a.current){e.next=3;break}throw new ReferenceError("Attempted to render while the card was not rendered, please try again.");case 3:if((r=document.createElement("canvas")).width=1500,r.height=2100,null!==(o=r.getContext("2d"))){e.next=9;break}throw new ReferenceError("Could not load canvas 2d context");case 9:return c='<?xml version="1.0" encoding="utf-8"?>'.concat(n.current.outerHTML),i='<?xml version="1.0" encoding="utf-8"?>'.concat(a.current.outerHTML),t.file("front.svg",c),t.file("back.svg",i),e.next=15,O("data:image/svg+xml;utf8,".concat(encodeURIComponent(c)));case 15:return l=e.sent,e.next=18,O("data:image/svg+xml;utf8,".concat(encodeURIComponent(i)));case 18:return u=e.sent,null===o||void 0===o||o.drawImage(l,0,0,1500,2100),e.t0=t,e.next=23,j(r);case 23:return e.t1=e.sent,e.t0.file.call(e.t0,"front.png",e.t1),null===o||void 0===o||o.drawImage(u,0,0,1500,2100),e.t2=t,e.next=29,j(r);case 29:return e.t3=e.sent,e.t2.file.call(e.t2,"back.png",e.t3),r.width=3e3,r.height=2100,null===o||void 0===o||o.drawImage(l,0,0,1500,2100),null===o||void 0===o||o.drawImage(u,1500,0,1500,2100),e.t4=t,e.next=38,j(r);case 38:return e.t5=e.sent,e.t4.file.call(e.t4,"row.png",e.t5),r.width=1500,r.height=4200,null===o||void 0===o||o.drawImage(l,0,0,1500,2100),null===o||void 0===o||o.drawImage(u,0,2100,1500,2100),e.t6=t,e.next=47,j(r);case 47:return e.t7=e.sent,e.t6.file.call(e.t6,"column.png",e.t7),r.remove(),e.abrupt("return",t);case 51:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}})),o.a.createElement(E,null,o.a.createElement(ve,{ref:n}),o.a.createElement(me,{ref:a}))}));function he(){var e=Object(v.a)(["\n    max-height: 50px;\n    display: block;\n"]);return he=function(){return e},e}function xe(){var e=Object(v.a)(["\n    user-select: contain;\n    resize: none;\n\n    font-weight: normal;\n    background: #00000080;\n    color: #cccccc;\n    border: solid 1px transparent;\n\n    padding: 2px 5px;\n\n    display: block;\n\n    width: calc(100% - 20px);\n\n    &:focus {\n        outline: none;\n        border-bottom: solid 1px #cccccc;\n    }\n"]);return xe=function(){return e},e}function ye(){var e=Object(v.a)(["\n    user-select: contain;\n\n    font-weight: normal;\n    background: #00000080;\n    color: #cccccc;\n    border: solid 1px transparent;\n\n    padding: 2px 5px;\n\n    display: block;\n\n    width: calc(100% - 20px);\n\n    &:focus {\n        outline: none;\n        border-bottom: solid 1px #cccccc;\n    }\n"]);return ye=function(){return e},e}function Ee(){var e=Object(v.a)(["\n    font-weight: bold;\n    display: ",";\n    user-select: none;\n\n    &:hover > input,\n    &:hover > textarea {\n        border-bottom: solid 1px #777777;\n    }\n"]);return Ee=function(){return e},e}function Oe(){var e=Object(v.a)(["\n    font-weight: bold;\n    font-size: 25px;\n\n    border-bottom: solid 1px #cccccc;\n    padding-bottom: 3px;\n    margin-bottom: 10px;\n"]);return Oe=function(){return e},e}function we(){var e=Object(v.a)(["\n    position: absolute;\n    top: 50%;\n    width: 100%;\n    text-align: center;\n\n    transform: translateY(-50%);\n"]);return we=function(){return e},e}function je(){var e=Object(v.a)(["\n    height: 100%;\n    width: 100%;\n    position: relative;\n\n    color: white;\n    background-color: #696969;\n"]);return je=function(){return e},e}function Ce(){var e=Object(v.a)(["\n    padding-bottom: 20px;\n"]);return Ce=function(){return e},e}function ke(){var e=Object(v.a)(["\n    background: #313131;\n    color: #cccccc;\n\n    padding: 15px 10px;\n\n    min-height: calc(100% - 30px);\n    overflow: auto;\n"]);return ke=function(){return e},e}var Se=b.b.div(ke()),Ae=b.b.div(Ce()),De=b.b.div(je()),Ge=b.b.div(we()),Ne=b.b.div(Oe()),Ie=b.b.label(Ee(),(function(e){return!0===e.hidden?"none":"block"})),_e=b.b.input(ye()),Te=b.b.textarea(xe()),ze=b.b.img(he()),Re=Object(r.memo)((function(e){var t=Object(r.useRef)(null),n=Object(r.useCallback)((function(){null!==t.current&&(t.current.style.height="1px",t.current.style.height="".concat(t.current.scrollHeight,"px"))}),[t]);return Object(r.useEffect)((function(){return n(),window.addEventListener("resize",n),function(){return window.removeEventListener("resize",n)}}),[n,e.value]),o.a.createElement(Te,Object.assign({},e,{ref:t,onKeyUp:n}))}));function Fe(){var e=Object(v.a)(["\n    margin-bottom: 20px;\n"]);return Fe=function(){return e},e}var Me=b.b.div(Fe());function Pe(){var e=Object(r.useContext)(K);return Object(P.b)((function(){var t;if(e.selection.type!==F.Group)return null;var n=e.selection.group;return o.a.createElement(Me,null,o.a.createElement(Ne,null,"Group settings"),o.a.createElement(Ie,null,"Name:",o.a.createElement(_e,{type:"text",value:null!==(t=e.groups[e.selection.group].name)&&void 0!==t?t:"",onChange:function(t){e.groups[n].editName(t.currentTarget.value)}})))}))}function Le(){var e=Object(r.useContext)(K),t=Object(r.useRef)(null);return Object(P.b)((function(){var n,r,a,c,i,l,u,s,p,m,g,v,b,h,x=e.selection.type===F.Card?e.groups[e.selection.group].rawCards[e.selection.card]:e.selection.type===F.Group?Object(Y.a)({name:e.groups[e.selection.group].name},e.groups[e.selection.group].defaults):{name:"No Selection"},y=e.selection.type===F.Card?e.groups[e.selection.group].defaults:void 0,E=function(t){return function(n){n.persist(),e.selection.type===F.Card?e.groups[e.selection.group].editCard(e.selection.card,t,""===n.currentTarget.value&&"name"!==t?void 0:n.currentTarget.value):e.selection.type===F.Group&&e.groups[e.selection.group].editDefaults(t,""===n.currentTarget.value?void 0:n.currentTarget.value)}},O=function(t){return function(){e.selection.type===F.Card?e.groups[e.selection.group].editCard(e.selection.card,t,void 0):e.selection.type===F.Group&&e.groups[e.selection.group].editDefaults(t,void 0)}},w=function(){var n=Object(f.a)(d.a.mark((function n(r){var o,a;return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r.persist(),e.selection.type!==F.Card){n.next=10;break}if(null===t.current){n.next=8;break}if(null===t.current.files){n.next=7;break}return n.next=6,ie(t.current.files[0]);case 6:o=n.sent;case 7:e.groups[e.selection.group].editCard(e.selection.card,"image",o);case 8:n.next=17;break;case 10:if(e.selection.type!==F.Group){n.next=17;break}if(null===t.current){n.next=17;break}if(null===t.current.files){n.next=16;break}return n.next=15,ie(t.current.files[0]);case 15:a=n.sent;case 16:e.groups[e.selection.group].editDefaults("image",a);case 17:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();return o.a.createElement(Ae,null,o.a.createElement(Pe,null),o.a.createElement(Ne,null,"Card Settings"),o.a.createElement(Ie,{hidden:e.selection.type===F.Group},"Name:",o.a.createElement(_e,{type:"text",value:null!==(n=x.name)&&void 0!==n?n:"",onChange:E("name")})),o.a.createElement(Ie,null,"Casting Time:",o.a.createElement(_e,{type:"text",value:null!==(r=x.castingTime)&&void 0!==r?r:"",onChange:E("castingTime"),placeholder:null===y||void 0===y?void 0:y.castingTime})),o.a.createElement(Ie,null,"Range:",o.a.createElement(_e,{type:"text",value:null!==(a=x.range)&&void 0!==a?a:"",onChange:E("range"),placeholder:null===y||void 0===y?void 0:y.range})),o.a.createElement(Ie,null,"Components:",o.a.createElement(_e,{type:"text",value:null!==(c=x.components)&&void 0!==c?c:"",onChange:E("components"),placeholder:null!==(i=null===y||void 0===y?void 0:y.components)&&void 0!==i?i:""})),o.a.createElement(Ie,null,"Duration:",o.a.createElement(_e,{type:"text",value:null!==(l=x.duration)&&void 0!==l?l:"",onChange:E("duration"),placeholder:null===y||void 0===y?void 0:y.duration})),o.a.createElement(Ie,null,"Physical Components:",o.a.createElement(Re,{value:null!==(u=x.physicalComponents)&&void 0!==u?u:"",onChange:E("physicalComponents"),placeholder:null===y||void 0===y?void 0:y.physicalComponents})),o.a.createElement(Ie,null,"Description:",o.a.createElement(Re,{value:null!==(s=x.description)&&void 0!==s?s:"",onChange:E("description"),placeholder:null===y||void 0===y?void 0:y.description})),o.a.createElement(Ie,null,"Extended Description:",o.a.createElement(Re,{value:null!==(p=x.extDescription)&&void 0!==p?p:"",onChange:E("extDescription"),placeholder:null===y||void 0===y?void 0:y.extDescription})),o.a.createElement(Ie,null,"Class:",o.a.createElement(_e,{type:"text",value:null!==(m=x.clazz)&&void 0!==m?m:"",onChange:E("clazz"),placeholder:null===y||void 0===y?void 0:y.clazz})),o.a.createElement(Ie,null,"Type:",o.a.createElement(_e,{type:"text",value:null!==(g=x.type)&&void 0!==g?g:"",onChange:E("type"),placeholder:null===y||void 0===y?void 0:y.type})),o.a.createElement(Ie,null,"Level:",o.a.createElement(_e,{type:"number",min:0,max:99,value:null!==(v=x.level)&&void 0!==v?v:"",onChange:E("level"),placeholder:void 0===(null===y||void 0===y?void 0:y.level)||null===y||void 0===y||null===(b=y.level)||void 0===b?void 0:b.toString()})),o.a.createElement(Ie,null,"Color:",o.a.createElement(_e,{type:"color",value:null!==(h=x.color)&&void 0!==h?h:"",onChange:E("color"),placeholder:null===y||void 0===y?void 0:y.color}),o.a.createElement("button",{onClick:O("color"),disabled:void 0===x.color},"Clear Color")),o.a.createElement(Ie,null,"Image:",o.a.createElement(ze,{src:x.image,alt:"Group Default"}),o.a.createElement(_e,{type:"file",accept:"image/*",onChange:w,ref:t}),o.a.createElement("button",{onClick:O("image"),disabled:void 0===x.image},"Remove Image")))}))}function We(){var e=Object(r.useContext)(K);return Object(P.b)((function(){return e.selection.type!==F.None?o.a.createElement(Se,null,o.a.createElement(Le,null)):o.a.createElement(De,null,o.a.createElement(Ge,null,"You have nothing selected"))}))}var Ue=n(3);function He(){var e=Object(v.a)(["\n    color: #f04747 !important;\n"]);return He=function(){return e},e}function Be(){var e=Object(v.a)(["\n    .react-contexify {\n        position: fixed;\n        opacity: 0;\n        user-select: none;\n        box-sizing: border-box;\n\n        padding: 10px 10px;\n        background-color: #1a1a1a;\n        box-shadow: 5px 5px 15px #00000066;\n\n        border-radius: 3px;\n\n        cursor: pointer;\n\n        & &__submenu {\n            position: absolute;\n            top: 0;\n            pointer-events: none;\n            transition: opacity 0.275s;\n\n            background-color: #282828fa;\n        }\n\n        &__submenu-arrow {\n            font-size: 12px;\n            position: absolute;\n            right: 10px;\n            line-height: 22px;\n        }\n\n        &__separator {\n            float: left;\n            width: 100%;\n            height: 1px;\n            cursor: default;\n            margin: 4px 0;\n\n            background-color: #666666;\n        }\n\n        &__item {\n            font-size: 14px;\n\n            color: #b8b8b8;\n            font-weight: bold;\n\n            cursor: pointer;\n            position: relative;\n\n            &:not(&--disabled):hover > &__data {\n                color: inherit;\n                background-color: #313131;\n            }\n\n            &:not(&--disabled):hover > .react-contexify__submenu {\n                pointer-events: initial;\n                opacity: 1;\n            }\n\n            &--disabled {\n                cursor: default;\n                opacity: .5;\n            }\n\n            &__data {\n                min-width: 100px;\n                padding: 6px 12px;\n                display: flex;\n                text-align: left;\n                white-space: nowrap;\n                color: inherit;\n                position: relative;\n            }\n\n            &__icon {\n                font-size: 20px;\n                margin-right: 8px;\n                width: 12px;\n                text-align: center;\n            }\n        }\n    }\n"]);return Be=function(){return e},e}var Je=Object(b.a)(Be()),Ye=Object(b.b)(Ue.Item)(He());function $e(e){var t=e.id,n=e.children,r=e.selection;return o.a.createElement("div",{onContextMenu:function(e){e.preventDefault(),e.stopPropagation(),e.persist(),Ue.contextMenu.hideAll(),setTimeout((function(){return Ue.contextMenu.show({event:e,id:t,props:r})}),1)},onClick:function(e){Ue.contextMenu.hideAll()}},n)}function Ve(e){var t=e.setDeleteSelection,n=Object(r.useContext)(K),a=Object(r.useContext)(Zt),c=Object(r.useContext)(en),i=Object(u.a)(c,2)[1];return Object(P.b)((function(){var e=function(e){var t=e.props;if(t.type===F.Group){var r=n.groups[t.group];ue({type:F.Group,data:r.data},"".concat(r.name,".group.json"))}else if(t.type===F.Card){var o=n.groups[t.group].cards[t.card];ue({type:F.Card,data:o},"".concat(o.name,".card.json"))}else ue({type:F.None,data:Object(B.toJS)(n.groupsData)},"workspace.json")},r=function(e){var t=e.props;if(t.type===F.Group){var r=n.groups[t.group].addCard();n.select(t.group,r)}else if(t.type===F.None){var o=n.addGroup(new $("New Group ".concat(n.groups.length)));n.select(o)}},c=function(e){var n=e.props;return t(n)},l=function(e){var t=e.props;if(t.type===F.Group){var r=n.addGroup(n.groups[t.group]);n.select(r)}else if(t.type===F.Card){var o=n.groups[t.group],a=o.addCard(o.rawCards[t.card]);n.select(t.group,a)}},u=function(e){var t=e.props;t.type===F.Group?(n.moveGroup(t.group,t.group-1),n.select(t.group-1)):t.type===F.Card&&(n.groups[t.group].moveCard(t.card,t.card-1),n.select(t.group,t.card-1))},s=function(e){var t=e.props;t.type===F.Group?(n.moveGroup(t.group,t.group+1),n.select(t.group+1)):t.type===F.Card&&(n.groups[t.group].moveCard(t.card,t.card+1),n.select(t.group,t.card+1))},p=function(e){var t=e.props;return t.type===F.Group?0===t.group:t.type!==F.Card||0===t.card},m=function(e){var t=e.props;return t.type===F.Group?t.group===n.groups.length-1:t.type!==F.Card||t.card===n.groups[t.group].cards.length-1},v=function(){var e=Object(f.a)(d.a.mark((function e(t){var r,o,c,l,u,s,p,f,m,v,b;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.props,null!==a.current){e.next=3;break}return e.abrupt("return");case 3:if(i(!0),r.type!==F.Group){e.next=24;break}o=n.selection,c=new g.a,l=0;case 8:if(!(l<n.groups[r.group].cards.length)){e.next=15;break}return n.select(r.group,l),e.next=12,a.current.render(c.folder(n.groups[r.group].cards[l].name));case 12:l++,e.next=8;break;case 15:return e.t0=saveAs,e.next=18,c.generateAsync({type:"blob"});case 18:e.t1=e.sent,e.t2=n.groups[r.group].name,(0,e.t0)(e.t1,e.t2),n.setSelection(o),e.next=61;break;case 24:if(r.type!==F.Card){e.next=39;break}return u=n.selection,n.select(r.group,r.card),e.next=29,a.current.render();case 29:return s=e.sent,e.t3=saveAs,e.next=33,s.generateAsync({type:"blob"});case 33:e.t4=e.sent,e.t5=n.groups[r.group].cards[r.card].name,(0,e.t3)(e.t4,e.t5),n.setSelection(u),e.next=61;break;case 39:p=n.selection,f=new g.a,m=0;case 42:if(!(m<n.groups.length)){e.next=55;break}v=f.folder(n.groups[m].name),b=0;case 45:if(!(b<n.groups[m].cards.length)){e.next=52;break}return n.select(m,b),e.next=49,a.current.render(v.folder(n.groups[m].cards[b].name));case 49:b++,e.next=45;break;case 52:m++,e.next=42;break;case 55:return e.t6=saveAs,e.next=58,f.generateAsync({type:"blob"});case 58:e.t7=e.sent,(0,e.t6)(e.t7,"workspace"),n.setSelection(p);case 61:i(!1);case 62:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return o.a.createElement(o.a.Fragment,null,o.a.createElement(Ue.Menu,{id:"none-contextmenu"},o.a.createElement(Ue.Item,{onClick:r},"Add Group"),o.a.createElement(Ue.Separator,null),o.a.createElement(Ue.Item,{onClick:function(){n.select()}},"Deselect All"),o.a.createElement(Ue.Separator,null),o.a.createElement(Ue.Item,{onClick:e},"Download All"),o.a.createElement(Ue.Item,{onClick:v},"Render All"),o.a.createElement(Ue.Item,{disabled:!0},"Print All")),o.a.createElement(Ue.Menu,{id:"group-contextmenu"},o.a.createElement(Ue.Item,{onClick:function(e){var t=e.props;t.type===F.Group&&n.select(t.group)},disabled:function(e){var t=e.props;return t.type===F.Group&&n.selection.type===F.Group&&n.selection.group===t.group}},"Edit"),o.a.createElement(Ue.Item,{onClick:r},"Add Card"),o.a.createElement(Ue.Item,{onClick:l},"Duplicate"),o.a.createElement(Ue.Separator,null),o.a.createElement(Ue.Item,{onClick:u,disabled:p},"Move Up"),o.a.createElement(Ue.Item,{onClick:s,disabled:m},"Move Down"),o.a.createElement(Ue.Separator,null),o.a.createElement(Ue.Item,{onClick:e},"Download Group"),o.a.createElement(Ue.Item,{onClick:v},"Render Group"),o.a.createElement(Ue.Item,{disabled:!0},"Print Group"),o.a.createElement(Ue.Separator,null),o.a.createElement(Ye,{onClick:c},"Delete")),o.a.createElement(Ue.Menu,{id:"card-contextmenu"},o.a.createElement(Ue.Item,{onClick:l},"Duplicate"),o.a.createElement(Ue.Separator,null),o.a.createElement(Ue.Item,{onClick:u,disabled:p},"Move Up"),o.a.createElement(Ue.Item,{onClick:s,disabled:m},"Move Down"),o.a.createElement(Ue.Separator,null),o.a.createElement(Ue.Item,{onClick:e},"Download Card"),o.a.createElement(Ue.Item,{onClick:v},"Render Card"),o.a.createElement(Ue.Item,{disabled:!0},"Print Card"),o.a.createElement(Ue.Separator,null),o.a.createElement(Ye,{onClick:c},"Delete")))}))}function Ke(){var e=Object(v.a)(["\n    color: #17831d;\n    font-weight: bold;\n\n    &:hover {\n        background: #17831d;\n        color: #FFFFFF;\n    }\n"]);return Ke=function(){return e},e}function Qe(){var e=Object(v.a)(["\n    color: #f04747;\n    font-weight: bold;\n\n    &:hover {\n        background: #f04747;\n        color: #FFFFFF;\n    }\n"]);return Qe=function(){return e},e}function qe(){var e=Object(v.a)(["\n    background: #313131;\n    border: none;\n    color: #cccccc;\n\n    padding: 5px 10px;\n    border-radius: 5px;\n\n    margin: 0px 10px;\n\n    &:hover {\n        background: #515151;\n    }\n"]);return qe=function(){return e},e}function Xe(){var e=Object(v.a)(["\n    grid-row: 3;\n    text-align: center;\n"]);return Xe=function(){return e},e}function Ze(){var e=Object(v.a)(["\n    color: #f04747;\n"]);return Ze=function(){return e},e}function et(){var e=Object(v.a)(["\n    grid-row: 2;\n\n    margin-left: 10px;\n    font-weight: bold;\n"]);return et=function(){return e},e}function tt(){var e=Object(v.a)(["\n    font-weight: bold;\n    font-style: italic;\n"]);return tt=function(){return e},e}function nt(){var e=Object(v.a)(["\n    grid-row: 1;\n    margin-left: 10px;\n"]);return nt=function(){return e},e}function rt(){var e=Object(v.a)(["\n    display: grid;\n    grid-template-columns: auto;\n    grid-template-rows: auto 40px 30px;\n    height: 100%;\n\n    grid-column-gap: 10px;\n\n    color: #cccccc;\n    font-size: 20px;\n"]);return rt=function(){return e},e}var ot={content:{background:"#1a1a1a",border:"solid 1px #666666",color:"#b8b8b8",height:"150px",left:"50%",maxHeight:"calc(100% - 40px)",maxWidth:"calc(100% - 40px)",minHeight:"100px",minWidth:"100px",position:"absolute",top:"50%",transform:"translate(-50%, -50%)",width:"500px"},overlay:{background:"#000000AA"}},at=b.b.div(rt()),ct=b.b.div(nt()),it=b.b.span(tt()),lt=b.b.div(et()),ut=b.b.span(Ze()),st=b.b.div(Xe()),pt=b.b.button(qe()),dt=Object(b.b)(pt)(Qe()),ft=Object(b.b)(pt)(Ke());function mt(e){var t=e.deleteSelection,n=e.setDeleteSelection,a=Object(r.useContext)(K),c=function(){if(t.type===F.Group){var e=a.groups[t.group];return o.a.createElement("span",null,"Are you sure you want to delete the group ",o.a.createElement(it,null,e.name)," and all of its cards")}if(t.type===F.Card){var n=a.groups[t.group].cards[t.card];return o.a.createElement("span",null,"Are you sure you want to delete the card ",o.a.createElement(it,null,n.name))}return o.a.createElement("span",null,"You have reached an invalid state, please press cancel")};return o.a.createElement(l.a,{isOpen:t.type!==F.None,style:ot},o.a.createElement(at,null,o.a.createElement(ct,null,o.a.createElement(P.a,null,c)),o.a.createElement(lt,null,"This action is ",o.a.createElement(ut,null,"irreversible")),o.a.createElement(st,null,o.a.createElement(pt,{onClick:function(){return n({type:F.None})}},"Cancel"),o.a.createElement(dt,{onClick:function(){t.type===F.Group?(a.select(),a.removeGroup(t.group)):t.type===F.Card?(a.select(t.group),a.groups[t.group].removeCard(t.card)):console.warn("Attempted to delete card when no card selected for deletion"),n({type:F.None})}},"Delete"))))}var gt=n(18),vt=n(22);function bt(){var e=Object(v.a)(["\n    background: #ff440041;\n"]);return bt=function(){return e},e}function ht(){var e=Object(v.a)(["\n    grid-row: 2;\n    user-select: none;\n\n    overflow: auto;\n    height: 100%;\n\n    padding: 10px 0px 10px 0px;\n    background: ",";\n"]);return ht=function(){return e},e}function xt(){var e=Object(v.a)(["\n    color: #cccccc;\n    text-align: center;\n    display: inline-block;\n    position: relative;\n\n    user-select: none;\n\n    width: 20px;\n    margin: 0 5px;\n\n    &:hover {\n        color: #43b581;\n    }\n"]);return xt=function(){return e},e}function yt(){var e=Object(v.a)(["\n    height: 20px;\n    font-size: 16px;\n    width: 20px;\n\n    color: #cccccc;\n    text-align: center;\n    display: ",";\n    position: relative;\n    vertical-align: text-bottom;\n\n    user-select: none;\n\n    &:hover {\n        color: #f04747;\n    }\n\n    svg {\n        position: absolute;\n\n        top: 50%;\n        left: 50%;\n\n        transform: translate(-50%, -50%);\n    }\n"]);return yt=function(){return e},e}function Et(){var e=Object(v.a)(["\n    &::-ms-clear {\n        display: none;\n    }\n    outline: none;\n\n    height: 20px;\n    width: ",";\n\n    background: transparent;\n    color: #cccccc;\n    border: none;\n\n    font-size: 15px;\n\n    padding: 0px;\n\n    display: inline-block;\n"]);return Et=function(){return e},e}function Ot(){var e=Object(v.a)(["\n    display: inline-block;\n    width: calc(100% - 60px);\n\n    margin: 8px 5px 8px 10px;\n\n    border: 1px solid transparent;\n\n    padding: 0px 3px;\n\n    background: #555555;\n"]);return Ot=function(){return e},e}function wt(){var e=Object(v.a)(["\n    grid-row: 1;\n    height: 100%;\n\n    padding: 0px 50px;\n\n    margin-left: -50px;\n\n    width: 100%;\n    box-shadow: ",";\n"]);return wt=function(){return e},e}function jt(){var e=Object(v.a)(["\n    display: grid;\n    grid-template-columns: auto;\n    grid-template-rows: 40px calc(100% - 60px);\n\n    grid-column-gap: 10px;\n\n    background: #313131;\n    color: #cccccc;\n\n    height: 100%;\n    overflow: hidden;\n"]);return jt=function(){return e},e}var Ct=b.b.div(jt()),kt=b.b.div(wt(),(function(e){return e.isTop?"none":"0px 10px 10px #000000"})),St=b.b.div(Ot()),At=b.b.input.attrs({type:"text"})(Et(),(function(e){return e.short?"calc(100% - 20px)":"calc(100%)"})),Dt=b.b.div(yt(),(function(e){return!0===e.hidden?"none":"inline-block"})),Gt=b.b.div(xt()),Nt=b.b.div(ht(),(function(e){return e.dragOver?"#ec52ec80":"none"})),It=b.b.span(bt());function _t(){var e=Object(v.a)(["\n    display: inline-block;\n    font-weight: bold;\n    font-size: 20px;\n"]);return _t=function(){return e},e}function Tt(){var e=Object(v.a)(["\n    display: inline-block;\n    width: 20px;\n    text-align: center;\n"]);return Tt=function(){return e},e}function zt(){var e=Object(v.a)(["\n    padding: 0px 0px 0px 10px;\n    background: ",";\n\n    &:hover {\n        background: #414141;\n    }\n"]);return zt=function(){return e},e}var Rt=b.b.div(zt(),(function(e){return e.selected?"#2b5c3b":"none"})),Ft=b.b.div(Tt()),Mt=b.b.div(_t());function Pt(){var e=Object(v.a)(["\n    min-height: 20px;\n    background: ",";\n\n    &:hover {\n        background: #414141;\n    }\n\n    padding: 3px 0px 3px 30px;\n"]);return Pt=function(){return e},e}var Lt=b.b.div(Pt(),(function(e){return e.selected?"#515151":"none"}));function Wt(e){return function(t){return t.name.toLowerCase().includes(e.toLowerCase())}}function Ut(e){var t=e.groupid,n=e.id,a=e.search,c=Object(r.useContext)(K),i=function(){return c.select(t,n)};return Object(P.b)((function(){var e=c.groups[t].cards[n],r=""!==a&&(c.selection.type!==F.Card||c.selection.card!==n||c.selection.group!==t)&&!Wt(a)(e);return o.a.createElement($e,{id:"card-contextmenu",selection:{type:F.Card,card:n,group:t}},o.a.createElement(Lt,{selected:c.selection.type===F.Card&&c.selection.card===n&&c.selection.group===t,onClick:i,hidden:r},Bt(e.name,a)))}))}function Ht(e){var t=e.id,n=e.search,a=Object(r.useState)(!1),c=Object(u.a)(a,2),i=c[0],l=c[1],s=Object(r.useContext)(K),p=Object(P.b)((function(){return""!==n&&0===s.groups[t].cards.filter(Wt(n)).length&&!s.groups[t].name.toLowerCase().includes(n.toLowerCase())&&!((s.selection.type===F.Card||s.selection.type===F.Group)&&s.selection.group===t)})),d=function(){return l(!i)};return Object(P.b)((function(){return o.a.createElement($e,{id:"group-contextmenu",selection:{type:F.Group,group:t}},o.a.createElement("div",{hidden:p},o.a.createElement(Rt,{selected:s.selection.type===F.Group&&s.selection.group===t,onClick:d},o.a.createElement(Ft,null,o.a.createElement(vt.a,{icon:i?gt.b:gt.a})),o.a.createElement(Mt,null,o.a.createElement(P.a,null,(function(){return o.a.createElement(o.a.Fragment,null,Bt(s.groups[t].name,n))})))),o.a.createElement("div",{hidden:i},o.a.createElement(P.a,null,(function(){return o.a.createElement(o.a.Fragment,null,s.groups[t].cards.map((function(e,r){return o.a.createElement(Ut,{key:r,id:r,groupid:t,search:n})})))})))))}))}function Bt(e,t){return void 0!==t&&""!==t?void 0!==e&&""!==e?e.split(new RegExp("(".concat(t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),")"),"gi")).map((function(e,n){return e.toLowerCase()===t.toLowerCase()?o.a.createElement(It,null,e):o.a.createElement("span",{key:n},e)})):void 0:e}function Jt(){var e=Object(r.useState)(""),t=Object(u.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(!1),i=Object(u.a)(c,2),l=i[0],s=i[1],p=function(){var e=Object(r.useState)(!0),t=Object(u.a)(e,2),n=t[0],o=t[1];return[n,function(e){n!==(0===e.currentTarget.scrollTop)&&o(0===e.currentTarget.scrollTop)}]}(),m=Object(u.a)(p,2),g=m[0],v=m[1],b=Object(r.useContext)(K),h=function(){var e=Object(f.a)(d.a.mark((function e(t){var n,r,o;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),t.persist(),s(!1),n=0;case 4:if(!(n<t.dataTransfer.items.length)){e.next=17;break}if("application/json"!==(r=t.dataTransfer.files[n]).type&&!r.name.endsWith(".json")){e.next=13;break}return e.next=9,ae(r);case 9:o=e.sent,se(JSON.parse(o),b),e.next=14;break;case 13:console.error('Format "'.concat(r.type,'" unrecognised'));case 14:n++,e.next=4;break;case 17:t.dataTransfer.items.clear();case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return o.a.createElement(Ct,null,o.a.createElement($e,{id:"none-contextmenu",selection:{type:F.None}},o.a.createElement(Nt,{dragOver:l,onScroll:v,onDrop:h,onDragEnter:function(){return s(!0)},onDragExit:function(){return s(!1)},onDragOver:function(e){e.preventDefault()}},o.a.createElement(P.a,null,(function(){return o.a.createElement(o.a.Fragment,null,b.groups.map((function(e,t){return o.a.createElement(Ht,{key:t,id:t,search:n})})))})))),o.a.createElement(kt,{isTop:g},o.a.createElement(St,null,o.a.createElement(At,{short:""!==n,value:n,onChange:function(e){return a(e.target.value)}}),o.a.createElement(Dt,{hidden:""===n,onClick:function(){return a("")}},o.a.createElement(vt.a,{icon:gt.d}))),o.a.createElement(Gt,{onClick:function(){var e=b.addGroup(new $("New Group ".concat(b.groups.length)));b.select(e)}},o.a.createElement(vt.a,{icon:gt.c}))))}var Yt=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||null!==window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function $t(e){if("serviceWorker"in navigator){if(new URL("",window.location.toString()).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");Yt?(!function(e,t){fetch(e).then((function(n){404===n.status||-1===n.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){return e.unregister().then((function(){window.location.reload()}))})).catch((function(e){return console.error(e)})):Vt(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})).catch((function(e){return console.error(e)}))):Vt(t,e)}))}}function Vt(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!==n&&(n.onstatechange=function(){"installed"===n.state&&(null!==navigator.serviceWorker.controller?(console.log("New content is available; please refresh."),t(!0)):console.log("Content is cached for offline use."))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}function Kt(e){var t=e.show;return o.a.createElement(l.a,{isOpen:t,style:ot},o.a.createElement(at,null,o.a.createElement(ct,null,"A rendering task is taking place"),o.a.createElement(lt,null,"Please ",o.a.createElement(ut,null,"DO NOT")," leave the page")))}function Qt(){var e=Object(v.a)(["\n    body,\n    html {\n        margin: 0;\n        padding: 0;\n        font-family: 'Open Sans', sans-serif;\n        overflow: auto;\n        width: 100%;\n        height: 100%;\n    }\n"]);return Qt=function(){return e},e}var qt=Object(b.a)(Qt());function Xt(e){var t=e.doUpdate,n=e.show,r=function(e){return function(){return t(e)}};return o.a.createElement(l.a,{isOpen:n,style:ot},o.a.createElement(at,null,o.a.createElement(ct,null,"There is a new update! You can choose to update now, or ignore the message."),o.a.createElement(st,null,o.a.createElement(ft,{onClick:r(!0)},"Update"),o.a.createElement(pt,{onClick:r(!1)},"Ignore"))))}var Zt=Object(r.createContext)({current:null}),en=Object(r.createContext)([!1,function(){}]);function tn(){var e=Object(r.useContext)(K),t=Object(r.useState)(!1),n=Object(u.a)(t,2),a=n[0],c=n[1],i=Object(r.useRef)(null),l=Object(r.useState)(!1),p=Object(u.a)(l,2),d=p[0],f=p[1];Object(r.useEffect)((function(){Object(s.create)({jsonify:!0,storage:localStorage})("state",e),$t(f),document.oncontextmenu=function(e){e.preventDefault()}}),[]);var m=Object(r.useState)({type:F.None}),g=Object(u.a)(m,2),v=g[0],b=g[1];return o.a.createElement(y,null,o.a.createElement(Zt.Provider,{value:i},o.a.createElement(en.Provider,{value:[a,c]},o.a.createElement(qt,null),o.a.createElement(Je,null),o.a.createElement(Jt,null),o.a.createElement(Ve,{setDeleteSelection:b}),o.a.createElement(mt,{setDeleteSelection:b,deleteSelection:v}),o.a.createElement(We,null),o.a.createElement(be,{ref:i}),o.a.createElement(Xt,{doUpdate:function(e){e?(console.log("%cUser accepting update, reloading","color: goldenrod"),location.reload()):console.log("%cUser ignored update","color: goldenrod"),f(!1)},show:d}),o.a.createElement(Kt,{show:a}))))}l.a.setAppElement("#root"),c.a.render(o.a.createElement(tn,null),document.getElementById("root"))}},[[48,1,2]]]);
//# sourceMappingURL=main.360444d0.chunk.js.map