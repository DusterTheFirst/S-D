/*! For license information please see main.a1be40e2.chunk.js.LICENSE.txt */
(this.webpackJsonpsd=this.webpackJsonpsd||[]).push([[0],{52:function(e,t,n){e.exports=n(86)},86:function(e,t,n){"use strict";n.r(t);var r,a,o,c,l,i,u,s,p,d,f,b,g=n(0),m=n.n(g),v=n(19),h=n.n(v),x=n(15),y=n.n(x),O=n(5),j=n(13),E=n(7),w=n.n(E),C=n(9),k=n(31),S=n.n(k),D=n(22),A=n.n(D),G=n(16),I=n(28),R=n(29),T=n(10),N=(n(46),n(4)),P=n(17),z=n(11),M=(r=Object(j.persist)("object"),a=Object(j.persist)("list"),o=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];Object(I.a)(this,e),Object(G.a)(this,"name",c,this),Object(G.a)(this,"defaults",l,this),Object(G.a)(this,"_cards",i,this),this.name=t,this._cards=r,this.defaults=n}return Object(R.a)(e,[{key:"data",get:function(){return{cards:this._cards,defaults:this.defaults,name:this.name}}},{key:"addCard",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{name:"New Card ".concat(this._cards.length)};return this._cards.push(e)-1}},{key:"moveCard",value:function(e,t){var n=this._cards.splice(e,1),r=Object(O.a)(n,1)[0];return this._cards.splice(t,0,r),this}},{key:"cards",get:function(){var e=this;return this._cards.map((function(t){return Object(z.a)(Object(z.a)({},e.defaults),t)}))}},{key:"rawCards",get:function(){return this._cards}},{key:"removeCard",value:function(e){return this._cards.splice(e,1)[0]}},{key:"editCard",value:function(e,t,n){this._cards[e]=Object.entries(Object(z.a)(Object(z.a)({},this._cards[e]),{},Object(P.a)({},t,n))).filter((function(e){return void 0!==Object(O.a)(e,2)[1]})).reduce((function(e,t){var n=Object(O.a)(t,2),r=n[0],a=n[1];return Object(z.a)(Object(z.a)({},e),{},Object(P.a)({},r,a))}),{})}},{key:"editDefaults",value:function(e,t){this.defaults=Object.entries(Object(z.a)(Object(z.a)({},this.defaults),{},Object(P.a)({},e,t))).filter((function(e){return void 0!==Object(O.a)(e,2)[1]})).reduce((function(e,t){var n=Object(O.a)(t,2),r=n[0],a=n[1];return Object(z.a)(Object(z.a)({},e),{},Object(P.a)({},r,a))}),{})}},{key:"editName",value:function(e){this.name=e}}],[{key:"fromData",value:function(t){return new e(t.name,t.defaults,t.cards)}}]),e}(),c=Object(T.a)(o.prototype,"name",[N.observable,j.persist],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),l=Object(T.a)(o.prototype,"defaults",[N.observable,r],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),i=Object(T.a)(o.prototype,"_cards",[N.observable,a],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Object(T.a)(o.prototype,"addCard",[N.action],Object.getOwnPropertyDescriptor(o.prototype,"addCard"),o.prototype),Object(T.a)(o.prototype,"moveCard",[N.action],Object.getOwnPropertyDescriptor(o.prototype,"moveCard"),o.prototype),Object(T.a)(o.prototype,"removeCard",[N.action],Object.getOwnPropertyDescriptor(o.prototype,"removeCard"),o.prototype),Object(T.a)(o.prototype,"editCard",[N.action],Object.getOwnPropertyDescriptor(o.prototype,"editCard"),o.prototype),Object(T.a)(o.prototype,"editDefaults",[N.action],Object.getOwnPropertyDescriptor(o.prototype,"editDefaults"),o.prototype),Object(T.a)(o.prototype,"editName",[N.action],Object.getOwnPropertyDescriptor(o.prototype,"editName"),o.prototype),o);!function(e){e.None="none",e.Group="group",e.Card="card"}(b||(b={}));var _,F,L=(u=Object(j.persist)("object"),s=Object(j.persist)("list",M),p=function(){function e(){Object(I.a)(this,e),Object(G.a)(this,"_selection",d,this),Object(G.a)(this,"_groups",f,this)}return Object(R.a)(e,[{key:"selection",get:function(){return this._selection}},{key:"select",value:function(e,t){this._selection=void 0===e?{type:b.None}:void 0===t?{group:e,type:b.Group}:{card:t,group:e,type:b.Card}}},{key:"setSelection",value:function(e){this._selection=e}},{key:"addGroup",value:function(e){return this._groups.push(e)-1}},{key:"removeGroup",value:function(e){return this._groups.splice(e,1)[0]}},{key:"groups",get:function(){return this._groups}},{key:"groupsData",get:function(){return this._groups.map((function(e){return e.data}))}},{key:"moveGroup",value:function(e,t){var n=this._groups.splice(e,1),r=Object(O.a)(n,1)[0];this._groups.splice(t,0,r)}}]),e}(),d=Object(T.a)(p.prototype,"_selection",[N.observable,u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{type:b.None}}}),f=Object(T.a)(p.prototype,"_groups",[N.observable,s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Object(T.a)(p.prototype,"select",[N.action],Object.getOwnPropertyDescriptor(p.prototype,"select"),p.prototype),Object(T.a)(p.prototype,"setSelection",[N.action],Object.getOwnPropertyDescriptor(p.prototype,"setSelection"),p.prototype),Object(T.a)(p.prototype,"addGroup",[N.action],Object.getOwnPropertyDescriptor(p.prototype,"addGroup"),p.prototype),Object(T.a)(p.prototype,"removeGroup",[N.action],Object.getOwnPropertyDescriptor(p.prototype,"removeGroup"),p.prototype),Object(T.a)(p.prototype,"moveGroup",[N.action],Object.getOwnPropertyDescriptor(p.prototype,"moveGroup"),p.prototype),p),B=Object(g.createContext)(new L),U=n(1),W=n(2),H=W.b.div(_||(_=Object(U.a)(["\n    position: absolute;\n\n    top: 0;\n    left: 0;\n    bottom: 0;\n    right: 0;\n\n    display: grid;\n    grid-template-columns: 250px auto 300px;\n    grid-template-rows: 100%;\n    grid-column-gap: 3px;\n\n    min-width: 800px;\n    height: 100%;\n    width: 100%;\n\n    background: #202020;\n"]))),J=W.b.div(F||(F=Object(U.a)(["\n    grid-column: 3;\n\n    overflow-y: auto;\n    overflow-x: hidden;\n    scrollbar-width: none;\n"]))),Y=n(25),$=n(51);function V(e){return K.apply(this,arguments)}function K(){return(K=Object(C.a)(w.a.mark((function e(t){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var r=new FileReader;r.readAsText(t),r.onload=function(t){null!==r.result?e(r.result.toString()):n(new Error("No result"))},r.onerror=n})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Q(e){return q.apply(this,arguments)}function q(){return(q=Object(C.a)(w.a.mark((function e(t){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var r=new FileReader;r.readAsDataURL(t),r.onload=function(t){null!==r.result?e(r.result.toString()):n(new Error("No result"))},r.onerror=n})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function X(e,t){Object($.saveAs)(new Blob([JSON.stringify(e)],{type:"application/json"}),t)}function Z(e,t){if(e.type===b.None){var n,r=Object(Y.a)(e.data);try{for(r.s();!(n=r.n()).done;){var a=n.value;t.addGroup(M.fromData(a))}}catch(l){r.e(l)}finally{r.f()}}else if(e.type===b.Group){var o=t.addGroup(M.fromData(e.data));t.select(o)}else if(t.selection.type===b.Card||t.selection.type===b.Group){var c=t.groups[t.selection.group].addCard(e.data);t.select(t.selection.group,c)}else alert("Attempted to add a card when no group is selected")}function ee(e){return te.apply(this,arguments)}function te(){return(te=Object(C.a)(w.a.mark((function e(t){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var r=new Image;r.src=t,r.onload=function(){return e(r)},r.onerror=n})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ne(e){return re.apply(this,arguments)}function re(){return(re=Object(C.a)(w.a.mark((function e(t){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){t.toBlob((function(t){return null===t?n():e(t)}),"image/png")})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ae,oe,ce,le,ie=n(8),ue=W.b.svg.attrs({fontFamily:"Modesto-Regular",height:700,version:"1.1",viewBox:"0 0 50 70",width:500,xmlns:"http://www.w3.org/2000/svg"})(ae||(ae=Object(U.a)(["\n    width: 300px;\n    height: calc(300px * 7/5);\n\n    user-select: none;\n"]))),se=W.b.text.attrs((function(e){var t,n,r;return{fontFamily:null!==(t=e.fontFamily)&&void 0!==t?t:"Open Sans",fontSize:null!==(n=e.fontSize)&&void 0!==n?n:2,textAnchor:null!==(r=e.textAnchor)&&void 0!==r?r:"middle"}}))(oe||(oe=Object(U.a)([""]))),pe=Object(W.b)(se).attrs({fontFamily:"Open Sans SemiBold"})(ce||(ce=Object(U.a)([""]))),de=Object(W.b)(se).attrs({fontFamily:"Modesto-Expd"})(le||(le=Object(U.a)([""])));function fe(e){return e.replace(/^(\*|-)(?= )/gim,"\u2022")}function be(e){for(var t=0,n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n),t|=0;return t}function ge(){var e=Object(g.useState)(),t=Object(O.a)(e,2),n=t[0],r=t[1];if(Object(g.useEffect)((function(){Promise.all([fetch("/fonts/Modesto-Expd.ttf").then((function(e){return e.blob()})).then(Q),fetch("/fonts/Modesto-Regular.ttf").then((function(e){return e.blob()})).then(Q),fetch("/fonts/OpenSans-Regular.ttf").then((function(e){return e.blob()})).then(Q),fetch("/fonts/OpenSans-SemiBold.ttf").then((function(e){return e.blob()})).then(Q)]).then(r).catch((function(e){return console.error(e)}))}),[]),void 0===n)return null;var a=Object(O.a)(n,4),o=a[0],c=a[1],l=a[2],i=a[3];return'\n        @font-face {\n            font-family: "Modesto-Expd";\n            src: url("'.concat(o,'");\n        }\n\n        @font-face {\n            font-family: "Modesto-Regular";\n            src: url("').concat(c,'");\n        }\n\n        @font-face {\n            font-family: "Open Sans";\n            src: url("').concat(l,'");\n        }\n\n        @font-face {\n            font-family: "Open Sans SemiBold";\n            src: url("').concat(i,'");\n        }\n    ')}function me(){var e,t=Object(g.useContext)(B),n=Object(g.useContext)(sn),r=Object(O.a)(n,1)[0],a=Object(g.useContext)(Pe);Object(g.useLayoutEffect)(a.current);var o=Object(ie.b)((function(){return t.selection.type===b.Card?t.groups[t.selection.group].cards[t.selection.card]:t.selection.type===b.Group?t.groups[t.selection.group].defaults:{name:"No Selection"}})),c=Object(g.useMemo)((function(){var e;return be(null!==(e=o.image)&&void 0!==e?e:"")}),[o.image]),l=void 0===o.level?null===(e=o.type)||void 0===e?void 0:e.charAt(0):o.level;return Object(ie.b)((function(){var e,t=null!==(e=o.color)&&void 0!==e?e:"#000000";return m.a.createElement(m.a.Fragment,null,m.a.createElement("rect",{width:"50",height:"70",fill:t}),m.a.createElement("rect",{width:"46",height:"66",x:"2",y:"2",rx:"2",ry:"2",fill:"white"}),m.a.createElement("rect",{width:"40",height:"60",x:"5",y:"5",rx:"2",ry:"2",stroke:t,strokeWidth:"0.5",fill:"transparent"}),m.a.createElement("polyline",{points:"5.25,35 25,5.25 45,34.75 25,64.75 5.25,35",fill:"transparent",stroke:t,strokeWidth:".5"}),m.a.createElement("text",{fontSize:"10",fill:t,x:"38",y:"15",textAnchor:"middle"},l),m.a.createElement("text",{fontSize:"10",fill:t,x:"12",y:"62",textAnchor:"middle"},l),r?m.a.createElement("image",{href:o.image,width:"25",height:"25",x:"12.5",y:"22.5"}):m.a.createElement("use",{href:"#".concat(c)}))}))}function ve(){var e=Object(g.useContext)(B);return Object(ie.b)((function(){var t,n=new Map,r=Object(Y.a)(e.groups);try{for(r.s();!(t=r.n()).done;){var a,o=t.value,c=Object(Y.a)(o.cards);try{for(c.s();!(a=c.n()).done;){var l=a.value;if(void 0!==l.image){var i=be(l.image);n.has(i)||n.set(i,m.a.createElement("image",{key:i,id:i.toString(),href:l.image,width:"25",height:"25",x:"12.5",y:"22.5"}))}}}catch(u){c.e(u)}finally{c.f()}}}catch(u){r.e(u)}finally{r.f()}return m.a.createElement(m.a.Fragment,null,Array.from(n.values()))}))}var he=Object(g.forwardRef)((function(e,t){var n=Object(g.useContext)(sn),r=Object(O.a)(n,1)[0],a=ge();return m.a.createElement(ue,{ref:t},m.a.createElement("defs",null,r?null:m.a.createElement(ve,null),m.a.createElement("style",null,a)),m.a.createElement(me,null))}));function xe(e,t,n){return e.replace("\r","").split("\n").map((function(e,r){return function(e,t,n){var r,a,o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],c=e.split(" "),l=0,i=document.createElementNS("http://www.w3.org/2000/svg","tspan"),u=document.createTextNode(c[0]);if(o){var s,p;i.setAttribute("x",n.x.baseVal[0].valueAsString),i.setAttribute("dy",null!==(s=null===(p=n.attributes.getNamedItem("font-size"))||void 0===p?void 0:p.value)&&void 0!==s?s:""),l++}if(i.appendChild(u),n.appendChild(i),!c.some((function(e){return e.length>0}))){var d,f;return i.textContent=" ",parseFloat(null!==(d=null===(f=n.attributes.getNamedItem("font-size"))||void 0===f?void 0:f.value)&&void 0!==d?d:"0")}for(var b=1;b<c.length;b++){var g,m,v,h;if(null===i.firstChild||null===i.firstChild.textContent)return console.error("TSPAN element has no first child",i),l*parseFloat(null!==(v=null===(h=n.attributes.getNamedItem("font-size"))||void 0===h?void 0:h.value)&&void 0!==v?v:"0");var x,y,O=null===(g=i.firstChild)||void 0===g||null===(m=g.textContent)||void 0===m?void 0:m.length;if(i.firstChild.textContent+=" ".concat(c[b]),i.getComputedTextLength()>t)i.firstChild.textContent=i.firstChild.textContent.slice(0,O),(i=document.createElementNS("http://www.w3.org/2000/svg","tspan")).setAttribute("x",n.x.baseVal[0].valueAsString),i.setAttribute("dy",null!==(x=null===(y=n.attributes.getNamedItem("font-size"))||void 0===y?void 0:y.value)&&void 0!==x?x:""),u=document.createTextNode(c[b]),i.appendChild(u),n.appendChild(i),l++}return l*parseFloat(null!==(r=null===(a=n.attributes.getNamedItem("font-size"))||void 0===a?void 0:a.value)&&void 0!==r?r:"0")}(e,t,n,0!==r)})).reduce((function(e,t){return e+t}))}var ye=Object(g.forwardRef)((function(e,t){var n=Object(g.useContext)(B),r=Object(g.useContext)(Ne),a=Object(g.useRef)(null),o=Object(g.useRef)(null),c=Object(g.useRef)(null),l=Object(g.useRef)(null),i=Object(g.useRef)(null),u=Object(ie.b)((function(){return n.selection.type===b.Card?n.groups[n.selection.group].cards[n.selection.card]:n.selection.type===b.Group?Object(z.a)({name:n.groups[n.selection.group].name},n.groups[n.selection.group].defaults):{name:"No Selection"}})),s=ge();return Object(g.useEffect)((function(){if(null!==s){var e=0,t=a.current,n=o.current,p=c.current,d=l.current,f=i.current;if(null!==n)if(void 0!==u.physicalComponents&&null!==t){var b=xe(fe(u.physicalComponents),44,t);n.setAttribute("height",(b+4).toString()),n.removeAttribute("display"),e+=b+3.5}else n.setAttribute("display","none");if(void 0!==u.description&&null!==p)p.setAttribute("dy",e.toString()),e+=xe(fe(u.description),44,p);if(null!==f)if(void 0!==u.extDescription&&null!==d){var g=xe(fe(u.extDescription),44,d);d.setAttribute("y",(65-g).toString()),f.setAttribute("transform","translate(0, ".concat(62-g,")")),f.removeAttribute("display")}else f.setAttribute("display","none");return r.current(),function(){null!==t&&(t.innerHTML=""),null!==p&&(p.innerHTML=""),null!==d&&(d.innerHTML="")}}}),[u,r,c,l,i,o,a,s]),Object(ie.b)((function(){var e,n,r,p,d=void 0!==u.duration&&null!==u.duration.toLowerCase().match(/^concentration(,)? /),f=d?null===(e=u.duration)||void 0===e?void 0:e.replace(/^concentration(,)? /i,""):u.duration,b="".concat(null!==(n=null===f||void 0===f?void 0:f.charAt(0).toUpperCase())&&void 0!==n?n:"").concat(null!==(r=null===f||void 0===f?void 0:f.slice(1))&&void 0!==r?r:""),g=void 0===u.level?u.type:0===u.level?"".concat(u.type," cantrip"):"".concat(function(e){var t=e%10,n=e%100;return"".concat(e,1===t&&11!==n?"st":2===t&&12!==n?"nd":3===t&&13!==n?"rd":"th")}(u.level)," level ").concat(u.type),v=null!==(p=u.color)&&void 0!==p?p:"#000000";return m.a.createElement(ue,{ref:t},m.a.createElement("defs",null,m.a.createElement("style",null,s)),m.a.createElement("rect",{width:"50",height:"70",fill:v}),m.a.createElement("rect",{width:"46",height:"64",x:"2",y:"2",rx:"2",ry:"2",fill:"white"}),m.a.createElement("line",{x1:"0",y1:"9",x2:"50",y2:"9",stroke:v,strokeWidth:".3"}),m.a.createElement("line",{x1:"0",y1:"16",x2:"50",y2:"16",stroke:v,strokeWidth:".3"}),m.a.createElement("line",{x1:"0",y1:"23",x2:"50",y2:"23",stroke:v,strokeWidth:".3"}),m.a.createElement("line",{x1:"25",y1:"9",x2:"25",y2:"23",stroke:v,strokeWidth:".3"}),m.a.createElement(de,{fill:v,fontSize:"4",x:"25",y:"6.75"},u.name),m.a.createElement(de,{fill:v,x:"13.5",y:"12"},"CASTING TIME"),m.a.createElement(se,{x:"13.5",y:"14.6"},u.castingTime),m.a.createElement(de,{fill:v,x:"36.5",y:"12"},"RANGE"),m.a.createElement(se,{x:"36.5",y:"14.6"},u.range),m.a.createElement(de,{fill:v,x:"13.5",y:"19"},"COMPONENTS"),m.a.createElement(se,{x:"13.5",y:"21.6"},u.components),m.a.createElement(de,{fill:v,x:"36.5",y:"19"},"DURATION"),m.a.createElement(se,{x:"36.5",y:"21.6"},b),m.a.createElement("g",{display:d?void 0:"none"},m.a.createElement("polygon",{points:"45.5,17 43.5,19.5 45.5,22 47.5,19.5 45.5,17",fill:v}),m.a.createElement(de,{x:"45.5",y:"19.5",dominantBaseline:"middle",fill:"#ffffff"},"C")),m.a.createElement("rect",{width:"50",height:"3.5",y:"23",fill:v,ref:o}),m.a.createElement(pe,{x:"3",y:"25.6",ref:a,fill:"#ffffff",textAnchor:"right"}),m.a.createElement(se,{x:"3",y:"25.5",ref:c,textAnchor:"right"}),m.a.createElement("g",{ref:i},m.a.createElement("rect",{width:"50",height:"3.5",y:"-3",fill:v}),m.a.createElement(de,{letterSpacing:".1",y:"-.4",x:"25",fill:"#ffffff"},"At Higher Levels")),m.a.createElement(se,{x:"3",ref:l,textAnchor:"right"}),m.a.createElement(de,{fill:"white",x:"2.5",y:"68.5",textAnchor:"left"},u.clazz),m.a.createElement(pe,{fill:"white",x:"48",y:"68.5",textAnchor:"end"},g))}))})),Oe=n(23);function je(e){return e.map((function(t,n){var r=Object(O.a)(t,2),a=r[0],o=r[1],c=n%3,l=Math.floor(n/3)%3,i=256.8*l+.15*72,u=c*(590.4/3)+.15*72;return[{absolutePosition:{x:u,y:i},height:256.8,svg:a,width:590.4/3},{absolutePosition:{x:590.4/3*2-u+.15*72*2,y:i},height:256.8,pageBreak:n===e.length-1?void 0:0===l&&0===c?"before":2===l&&2===c?"after":void 0,svg:o,width:590.4/3}]})).reduce((function(e,t,n){var r=Object(O.a)(e,3),a=r[0],o=r[1],c=r[2],l=Object(O.a)(t,2),i=l[0],u=l[1];return n%9===0?[[].concat(Object(Oe.a)(a),Object(Oe.a)(o),Object(Oe.a)(c)),[i],[u]]:[a,[].concat(Object(Oe.a)(o),[i]),[].concat(Object(Oe.a)(c),[u])]}),[[],[],[]])}function Ee(e){return e.map((function(t,n){var r=Object(O.a)(t,2),a=r[0],o=r[1],c=n%3,l=256.8*c+.15*72;return[{absolutePosition:{x:.15*72,y:l},height:256.8,svg:a,width:256.8/70*50},{absolutePosition:{x:194.22857142857143,y:l},height:256.8,pageBreak:2===c&&n!==e.length-1?"after":void 0,svg:o,width:256.8/70*50}]}))}var we,Ce,ke,Se,De,Ae,Ge,Ie,Re,Te,Ne=Object(g.createContext)({current:function(){}}),Pe=Object(g.createContext)({current:function(){}}),ze=Object(g.forwardRef)((function(e,t){var n=Object(g.useRef)(null),r=Object(g.useRef)(null),a=Object(g.useRef)((function(){})),o=Object(g.useRef)((function(){})),c=Object(g.useContext)(B),l=Object(g.useContext)(sn),i=Object(O.a)(l,2)[1];Object(g.useEffect)((function(){Promise.all([fetch("/fonts/Modesto-Expd.ttf").then((function(e){return e.blob()})).then(Q),fetch("/fonts/Modesto-Regular.ttf").then((function(e){return e.blob()})).then(Q),fetch("/fonts/OpenSans-Regular.ttf").then((function(e){return e.blob()})).then(Q),fetch("/fonts/OpenSans-SemiBold.ttf").then((function(e){return e.blob()})).then(Q)]).then((function(e){var t=Object(O.a)(e,4),n=t[0],r=t[1],a=t[2],o=t[3];A.a.vfs={"Modesto-Expd.ttf":n.substring(n.lastIndexOf(",")+1),"Modesto-Regular.ttf":r.substring(r.lastIndexOf(",")+1),"OpenSans-Regular.ttf":a.substring(a.lastIndexOf(",")+1),"OpenSans-SemiBold.ttf":o.substring(o.lastIndexOf(",")+1)},A.a.fonts={"Modesto-Expd":{normal:"Modesto-Expd.ttf"},"Modesto-Regular":{normal:"Modesto-Regular.ttf"},"Open Sans":{normal:"OpenSans-Regular.ttf"},"Open Sans SemiBold":{normal:"OpenSans-SemiBold.ttf"}}})).catch((function(e){return console.error(e)}))}),[]);var u=Object(g.useCallback)((function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Promise.race([new Promise((function(e){a.current=function(){a.current=function(){},o.current=function(){},e(void 0)},c.select.apply(c,t)})),new Promise((function(e){o.current=function(){a.current=function(){},o.current=function(){},e(void 0)}})),new Promise((function(e){return setTimeout((function(){return e(void 0)}),1e3)}))])}),[c,a,o]),s=Object(g.useCallback)((function(){if(null===n.current||null===r.current)throw new ReferenceError("Attempted to render while the card was not rendered, please try again.");return['<?xml version="1.0" encoding="utf-8"?>'.concat(n.current.outerHTML),'<?xml version="1.0" encoding="utf-8"?>'.concat(r.current.outerHTML)]}),[n,r]),p=Object(g.useCallback)(Object(C.a)(w.a.mark((function e(){var t,n,r,a,o,c,l,i,u,p=arguments;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=p.length>0&&void 0!==p[0]?p[0]:new S.a,(n=document.createElement("canvas")).width=1500,n.height=2100,null!==(r=n.getContext("2d"))){e.next=7;break}throw new ReferenceError("Could not load canvas 2d context");case 7:return a=s(),o=Object(O.a)(a,2),c=o[0],l=o[1],t.file("front.svg",c),t.file("back.svg",l),e.next=12,ee("data:image/svg+xml;utf8,".concat(encodeURIComponent(c)));case 12:return i=e.sent,e.next=15,ee("data:image/svg+xml;utf8,".concat(encodeURIComponent(l)));case 15:return u=e.sent,null===r||void 0===r||r.drawImage(i,0,0,1500,2100),e.t0=t,e.next=20,ne(n);case 20:return e.t1=e.sent,e.t0.file.call(e.t0,"front.png",e.t1),null===r||void 0===r||r.drawImage(u,0,0,1500,2100),e.t2=t,e.next=26,ne(n);case 26:return e.t3=e.sent,e.t2.file.call(e.t2,"back.png",e.t3),n.width=3e3,n.height=2100,null===r||void 0===r||r.drawImage(i,0,0,1500,2100),null===r||void 0===r||r.drawImage(u,1500,0,1500,2100),e.t4=t,e.next=35,ne(n);case 35:return e.t5=e.sent,e.t4.file.call(e.t4,"row.png",e.t5),n.width=1500,n.height=4200,null===r||void 0===r||r.drawImage(i,0,0,1500,2100),null===r||void 0===r||r.drawImage(u,0,2100,1500,2100),e.t6=t,e.next=44,ne(n);case 44:return e.t7=e.sent,e.t6.file.call(e.t6,"column.png",e.t7),n.remove(),e.abrupt("return",t);case 48:case"end":return e.stop()}}),e)}))),[s]),d=Object(g.useCallback)((function(e){return function(){var t=Object(C.a)(w.a.mark((function t(n){var r,a,o,l,p,d,f,g;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i(!0),r=c.selection,n.type!==b.Group){t.next=16;break}a=[],o=0;case 5:if(!(o<c.groups[n.group].cards.length)){t.next=13;break}return t.next=8,u(n.group,o);case 8:l=s(),a.push(l);case 10:o++,t.next=5;break;case 13:A.a.createPdf({content:e(a),pageMargins:0,pageSize:"LETTER"}).print(),t.next=38;break;case 16:if(n.type!==b.Card){t.next=22;break}return t.next=19,u(n.group,n.card);case 19:A.a.createPdf({content:e([s()]),pageMargins:0,pageSize:"LETTER"}).print(),t.next=38;break;case 22:p=[],d=0;case 24:if(!(d<c.groups.length)){t.next=37;break}f=0;case 26:if(!(f<c.groups[d].cards.length)){t.next=34;break}return t.next=29,u(d,f);case 29:g=s(),p.push(g);case 31:f++,t.next=26;break;case 34:d++,t.next=24;break;case 37:A.a.createPdf({content:e(p),pageMargins:0,pageSize:"LETTER"}).print();case 38:c.setSelection(r),i(!1);case 40:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}),[s,u,i,c]);return Object(g.useImperativeHandle)(t,(function(){return{printDoubleSided:d(je),printFoldable:d(Ee),render:function(){var e=Object(C.a)(w.a.mark((function e(t){var n,r,a,o,l,s,d,f,g,m,v,h,x,y,O,j;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i(!0),n=c.selection,t.type!==b.Group){e.next=24;break}r=new S.a,a=c.groups[t.group].cards.length,o=a.toString(10).length,l=0;case 7:if(!(l<a)){e.next=16;break}return e.next=10,u(t.group,l);case 10:return s=r.folder("".concat(l.toString(10).padStart(o,"0"),"-").concat(c.groups[t.group].cards[l].name)),e.next=13,p(s);case 13:l++,e.next=7;break;case 16:return e.t0=saveAs,e.next=19,r.generateAsync({type:"blob"});case 19:e.t1=e.sent,e.t2="".concat(c.groups[t.group].name,".zip"),(0,e.t0)(e.t1,e.t2),e.next=64;break;case 24:if(t.type!==b.Card){e.next=38;break}return e.next=27,u(t.group,t.card);case 27:return e.next=29,p();case 29:return d=e.sent,e.t3=saveAs,e.next=33,d.generateAsync({type:"blob"});case 33:e.t4=e.sent,e.t5="".concat(c.groups[t.group].cards[t.card].name,".zip"),(0,e.t3)(e.t4,e.t5),e.next=64;break;case 38:f=new S.a,g=c.groups.length,m=g.toString(10).length,v=0;case 42:if(!(v<g)){e.next=59;break}h=f.folder("".concat(v.toString(10).padStart(m,"0"),"-").concat(c.groups[v].name)),x=c.groups[v].cards.length,y=x.toString(10).length,O=0;case 47:if(!(O<x)){e.next=56;break}return e.next=50,u(v,O);case 50:return j=h.folder("".concat(O.toString(10).padStart(y,"0"),"-").concat(c.groups[v].cards[O].name)),e.next=53,p(j);case 53:O++,e.next=47;break;case 56:v++,e.next=42;break;case 59:return e.t6=saveAs,e.next=62,f.generateAsync({type:"blob"});case 62:e.t7=e.sent,(0,e.t6)(e.t7,"workspace.zip");case 64:c.setSelection(n),i(!1);case 66:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}})),m.a.createElement(J,null,m.a.createElement(Ne.Provider,{value:a},m.a.createElement(Pe.Provider,{value:o},m.a.createElement(ye,{ref:n}),m.a.createElement(he,{ref:r}))))})),Me=W.b.div(we||(we=Object(U.a)(["\n    background: #313131;\n    color: #cccccc;\n\n    padding: 15px 10px;\n\n    min-height: calc(100% - 30px);\n    overflow: auto;\n"]))),_e=W.b.div(Ce||(Ce=Object(U.a)(["\n    padding-bottom: 20px;\n"]))),Fe=W.b.div(ke||(ke=Object(U.a)(["\n    height: 100%;\n    width: 100%;\n    position: relative;\n\n    color: white;\n    background-color: #696969;\n"]))),Le=W.b.div(Se||(Se=Object(U.a)(["\n    position: absolute;\n    top: 50%;\n    width: 100%;\n    text-align: center;\n\n    transform: translateY(-50%);\n"]))),Be=W.b.div(De||(De=Object(U.a)(["\n    font-weight: bold;\n    font-size: 25px;\n\n    border-bottom: solid 1px #cccccc;\n    padding-bottom: 3px;\n    margin-bottom: 10px;\n"]))),Ue=W.b.label(Ae||(Ae=Object(U.a)(["\n    font-weight: bold;\n    display: ",";\n    user-select: none;\n\n    &:hover > input,\n    &:hover > textarea {\n        border-bottom: solid 1px #777777;\n    }\n"])),(function(e){return!0===e.hidden?"none":"block"})),We=W.b.input(Ge||(Ge=Object(U.a)(["\n    user-select: contain;\n\n    font-weight: normal;\n    background: #00000080;\n    color: #cccccc;\n    border: solid 1px transparent;\n\n    padding: 2px 5px;\n\n    display: block;\n\n    width: calc(100% - 20px);\n\n    &:focus {\n        outline: none;\n        border-bottom: solid 1px #cccccc;\n    }\n"]))),He=W.b.textarea(Ie||(Ie=Object(U.a)(["\n    user-select: contain;\n    resize: none;\n\n    font-weight: normal;\n    background: #00000080;\n    color: #cccccc;\n    border: solid 1px transparent;\n\n    padding: 2px 5px;\n\n    display: block;\n\n    width: calc(100% - 20px);\n\n    &:focus {\n        outline: none;\n        border-bottom: solid 1px #cccccc;\n    }\n"]))),Je=W.b.img(Re||(Re=Object(U.a)(["\n    max-height: 50px;\n    display: block;\n"]))),Ye=Object(g.memo)((function(e){var t=Object(g.useRef)(null),n=Object(g.useCallback)((function(){null!==t.current&&(t.current.style.height="1px",t.current.style.height="".concat(t.current.scrollHeight,"px"))}),[t]);return Object(g.useEffect)((function(){return n(),window.addEventListener("resize",n),function(){return window.removeEventListener("resize",n)}}),[n,e.value]),m.a.createElement(He,Object.assign({},e,{ref:t,onKeyUp:n}))})),$e=W.b.div(Te||(Te=Object(U.a)(["\n    margin-bottom: 20px;\n"])));function Ve(){var e=Object(g.useContext)(B);return Object(ie.b)((function(){var t;if(e.selection.type!==b.Group)return null;var n=e.selection.group;return m.a.createElement($e,null,m.a.createElement(Be,null,"Group settings"),m.a.createElement(Ue,null,"Name:",m.a.createElement(We,{type:"text",value:null!==(t=e.groups[e.selection.group].name)&&void 0!==t?t:"",onChange:function(t){e.groups[n].editName(t.currentTarget.value)}})))}))}function Ke(){var e=Object(g.useContext)(B),t=Object(g.useRef)(null);return Object(ie.b)((function(){var n,r,a,o,c,l,i,u,s,p,d,f,g,v,h=e.selection.type===b.Card?e.groups[e.selection.group].rawCards[e.selection.card]:e.selection.type===b.Group?Object(z.a)({name:e.groups[e.selection.group].name},e.groups[e.selection.group].defaults):{name:"No Selection"},x=e.selection.type===b.Card?e.groups[e.selection.group].defaults:void 0,y=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return e};return function(r){r.persist(),e.selection.type===b.Card?e.groups[e.selection.group].editCard(e.selection.card,t,n(""===r.currentTarget.value&&"name"!==t?void 0:r.currentTarget.value)):e.selection.type===b.Group&&e.groups[e.selection.group].editDefaults(t,n(""===r.currentTarget.value?void 0:r.currentTarget.value))}},O=function(t){return function(){e.selection.type===b.Card?e.groups[e.selection.group].editCard(e.selection.card,t,void 0):e.selection.type===b.Group&&e.groups[e.selection.group].editDefaults(t,void 0)}},j=function(){var n=Object(C.a)(w.a.mark((function n(r){var a,o;return w.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r.persist(),e.selection.type!==b.Card){n.next=10;break}if(null===t.current){n.next=8;break}if(null===t.current.files){n.next=7;break}return n.next=6,Q(t.current.files[0]);case 6:a=n.sent;case 7:e.groups[e.selection.group].editCard(e.selection.card,"image",a);case 8:n.next=17;break;case 10:if(e.selection.type!==b.Group){n.next=17;break}if(null===t.current){n.next=17;break}if(null===t.current.files){n.next=16;break}return n.next=15,Q(t.current.files[0]);case 15:o=n.sent;case 16:e.groups[e.selection.group].editDefaults("image",o);case 17:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();return m.a.createElement(_e,null,m.a.createElement(Ve,null),m.a.createElement(Be,null,"Card Settings"),m.a.createElement(Ue,{hidden:e.selection.type===b.Group},"Name:",m.a.createElement(We,{type:"text",value:null!==(n=h.name)&&void 0!==n?n:"",onChange:y("name")})),m.a.createElement(Ue,null,"Casting Time:",m.a.createElement(We,{type:"text",value:null!==(r=h.castingTime)&&void 0!==r?r:"",onChange:y("castingTime"),placeholder:null===x||void 0===x?void 0:x.castingTime})),m.a.createElement(Ue,null,"Range:",m.a.createElement(We,{type:"text",value:null!==(a=h.range)&&void 0!==a?a:"",onChange:y("range"),placeholder:null===x||void 0===x?void 0:x.range})),m.a.createElement(Ue,null,"Components:",m.a.createElement(We,{type:"text",value:null!==(o=h.components)&&void 0!==o?o:"",onChange:y("components"),placeholder:null!==(c=null===x||void 0===x?void 0:x.components)&&void 0!==c?c:""})),m.a.createElement(Ue,null,"Duration:",m.a.createElement(We,{type:"text",value:null!==(l=h.duration)&&void 0!==l?l:"",onChange:y("duration"),placeholder:null===x||void 0===x?void 0:x.duration})),m.a.createElement(Ue,null,"Physical Components:",m.a.createElement(Ye,{value:null!==(i=h.physicalComponents)&&void 0!==i?i:"",onChange:y("physicalComponents"),placeholder:null===x||void 0===x?void 0:x.physicalComponents})),m.a.createElement(Ue,null,"Description:",m.a.createElement(Ye,{value:null!==(u=h.description)&&void 0!==u?u:"",onChange:y("description"),placeholder:null===x||void 0===x?void 0:x.description})),m.a.createElement(Ue,null,"Extended Description:",m.a.createElement(Ye,{value:null!==(s=h.extDescription)&&void 0!==s?s:"",onChange:y("extDescription"),placeholder:null===x||void 0===x?void 0:x.extDescription})),m.a.createElement(Ue,null,"Class:",m.a.createElement(We,{type:"text",value:null!==(p=h.clazz)&&void 0!==p?p:"",onChange:y("clazz"),placeholder:null===x||void 0===x?void 0:x.clazz})),m.a.createElement(Ue,null,"Type:",m.a.createElement(We,{type:"text",value:null!==(d=h.type)&&void 0!==d?d:"",onChange:y("type"),placeholder:null===x||void 0===x?void 0:x.type})),m.a.createElement(Ue,null,"Level:",m.a.createElement(We,{type:"number",min:0,max:99,value:null!==(f=h.level)&&void 0!==f?f:"",onChange:y("level",(function(e){return void 0===e?void 0:parseInt(e,10)})),placeholder:void 0===(null===x||void 0===x?void 0:x.level)||null===x||void 0===x||null===(g=x.level)||void 0===g?void 0:g.toString()})),m.a.createElement(Ue,null,"Color:",m.a.createElement(We,{type:"color",value:null!==(v=h.color)&&void 0!==v?v:"",onChange:y("color"),placeholder:null===x||void 0===x?void 0:x.color}),m.a.createElement("button",{onClick:O("color"),disabled:void 0===h.color},"Clear Color")),m.a.createElement(Ue,null,"Image:",m.a.createElement(Je,{src:h.image,alt:"Group Default"}),m.a.createElement(We,{type:"file",accept:"image/*",onChange:j,ref:t}),m.a.createElement("button",{onClick:O("image"),disabled:void 0===h.image},"Remove Image")))}))}function Qe(){var e=Object(g.useContext)(B);return Object(ie.b)((function(){return e.selection.type!==b.None?m.a.createElement(Me,null,m.a.createElement(Ke,null)):m.a.createElement(Fe,null,m.a.createElement(Le,null,"You have nothing selected"))}))}var qe,Xe,Ze,et,tt,nt,rt,at,ot,ct,lt,it=n(3),ut=Object(W.a)(qe||(qe=Object(U.a)(["\n    .react-contexify {\n        position: fixed;\n        opacity: 0;\n        user-select: none;\n        box-sizing: border-box;\n\n        padding: 10px 10px;\n        background-color: #1a1a1a;\n        box-shadow: 5px 5px 15px #00000066;\n\n        border-radius: 3px;\n\n        cursor: pointer;\n\n        & &__submenu {\n            position: absolute;\n            top: 0;\n            pointer-events: none;\n            transition: opacity 0.275s;\n\n            background-color: #282828fa;\n        }\n\n        &__submenu-arrow {\n            font-size: 12px;\n            position: absolute;\n            right: 10px;\n            line-height: 22px;\n        }\n\n        &__separator {\n            float: left;\n            width: 100%;\n            height: 1px;\n            cursor: default;\n            margin: 4px 0;\n\n            background-color: #666666;\n        }\n\n        &__item {\n            font-size: 14px;\n\n            color: #b8b8b8;\n            font-weight: bold;\n\n            cursor: pointer;\n            position: relative;\n\n            &:not(&--disabled):hover > &__data {\n                color: inherit;\n                background-color: #313131;\n            }\n\n            &:not(&--disabled):hover > .react-contexify__submenu {\n                pointer-events: initial;\n                opacity: 1;\n            }\n\n            &--disabled {\n                cursor: default;\n                opacity: .5;\n            }\n\n            &__data {\n                min-width: 100px;\n                padding: 6px 12px;\n                display: flex;\n                text-align: left;\n                white-space: nowrap;\n                color: inherit;\n                position: relative;\n            }\n\n            &__icon {\n                font-size: 20px;\n                margin-right: 8px;\n                width: 12px;\n                text-align: center;\n            }\n        }\n    }\n"]))),st=Object(W.b)(it.Item)(Xe||(Xe=Object(U.a)(["\n    color: #f04747 !important;\n"])));function pt(e){var t=e.id,n=e.children,r=e.selection;return m.a.createElement("div",{onContextMenu:function(e){e.preventDefault(),e.stopPropagation(),e.persist(),it.contextMenu.hideAll(),setTimeout((function(){return it.contextMenu.show({event:e,id:t,props:r})}),1)},onClick:function(e){it.contextMenu.hideAll()}},n)}function dt(e){var t=e.setDeleteSelection,n=Object(g.useContext)(B),r=Object(g.useContext)(un);return Object(ie.b)((function(){var e=function(e){var t=e.props;if(t.type===b.Group){var r=n.groups[t.group];X({type:b.Group,data:r.data},"".concat(r.name,".group.json"))}else if(t.type===b.Card){var a=n.groups[t.group].cards[t.card];X({type:b.Card,data:a},"".concat(a.name,".card.json"))}else X({type:b.None,data:Object(N.toJS)(n.groupsData)},"workspace.json")},a=function(e){var t=e.props;if(t.type===b.Group){var r=n.groups[t.group].addCard();n.select(t.group,r)}else if(t.type===b.None){var a=n.addGroup(new M("New Group ".concat(n.groups.length)));n.select(a)}},o=function(e){var n=e.props;return t(n)},c=function(e){var t=e.props;if(t.type===b.Group){var r=n.addGroup(n.groups[t.group]);n.select(r)}else if(t.type===b.Card){var a=n.groups[t.group],o=a.addCard(a.rawCards[t.card]);n.select(t.group,o)}},l=function(e){var t=e.props;t.type===b.Group?(n.moveGroup(t.group,t.group-1),n.select(t.group-1)):t.type===b.Card&&(n.groups[t.group].moveCard(t.card,t.card-1),n.select(t.group,t.card-1))},i=function(e){var t=e.props;t.type===b.Group?(n.moveGroup(t.group,t.group+1),n.select(t.group+1)):t.type===b.Card&&(n.groups[t.group].moveCard(t.card,t.card+1),n.select(t.group,t.card+1))},u=function(e){var t=e.props;return t.type===b.Group?0===t.group:t.type!==b.Card||0===t.card},s=function(e){var t=e.props;return t.type===b.Group?t.group===n.groups.length-1:t.type!==b.Card||t.card===n.groups[t.group].cards.length-1},p=function(){var e=Object(C.a)(w.a.mark((function e(t){var n;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.props,null!==r.current){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,r.current.render(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),d=function(){var e=Object(C.a)(w.a.mark((function e(t){var n;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.props,null!==r.current){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,r.current.printDoubleSided(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=Object(C.a)(w.a.mark((function e(t){var n;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.props,null!==r.current){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,r.current.printFoldable(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return m.a.createElement(m.a.Fragment,null,m.a.createElement(it.Menu,{id:"none-contextmenu"},m.a.createElement(it.Item,{onClick:a},"Add Group"),m.a.createElement(it.Separator,null),m.a.createElement(it.Item,{onClick:function(){n.select()}},"Deselect All"),m.a.createElement(it.Separator,null),m.a.createElement(it.Item,{onClick:e},"Download All"),m.a.createElement(it.Item,{onClick:p},"Render All"),m.a.createElement(it.Item,{onClick:d},"Print All (Double Sided)"),m.a.createElement(it.Item,{onClick:f},"Print All (Foldable)")),m.a.createElement(it.Menu,{id:"group-contextmenu"},m.a.createElement(it.Item,{onClick:function(e){var t=e.props;t.type===b.Group&&n.select(t.group)},disabled:function(e){var t=e.props;return t.type===b.Group&&n.selection.type===b.Group&&n.selection.group===t.group}},"Edit"),m.a.createElement(it.Item,{onClick:a},"Add Card"),m.a.createElement(it.Item,{onClick:c},"Duplicate"),m.a.createElement(it.Separator,null),m.a.createElement(it.Item,{onClick:l,disabled:u},"Move Up"),m.a.createElement(it.Item,{onClick:i,disabled:s},"Move Down"),m.a.createElement(it.Separator,null),m.a.createElement(it.Item,{onClick:e},"Download Group"),m.a.createElement(it.Item,{onClick:p},"Render Group"),m.a.createElement(it.Item,{onClick:d},"Print Group (Double Sided)"),m.a.createElement(it.Item,{onClick:f},"Print Group (Foldable)"),m.a.createElement(it.Separator,null),m.a.createElement(st,{onClick:o},"Delete")),m.a.createElement(it.Menu,{id:"card-contextmenu"},m.a.createElement(it.Item,{onClick:c},"Duplicate"),m.a.createElement(it.Separator,null),m.a.createElement(it.Item,{onClick:l,disabled:u},"Move Up"),m.a.createElement(it.Item,{onClick:i,disabled:s},"Move Down"),m.a.createElement(it.Separator,null),m.a.createElement(it.Item,{onClick:e},"Download Card"),m.a.createElement(it.Item,{onClick:p},"Render Card"),m.a.createElement(it.Item,{onClick:d},"Print Card (Double Sided)"),m.a.createElement(it.Item,{onClick:f},"Print Card (Foldable)"),m.a.createElement(it.Separator,null),m.a.createElement(st,{onClick:o},"Delete")))}))}var ft={content:{background:"#1a1a1a",border:"solid 1px #666666",color:"#b8b8b8",height:"150px",left:"50%",maxHeight:"calc(100% - 40px)",maxWidth:"calc(100% - 40px)",minHeight:"100px",minWidth:"100px",position:"absolute",top:"50%",transform:"translate(-50%, -50%)",width:"500px"},overlay:{background:"#000000AA"}},bt=W.b.div(Ze||(Ze=Object(U.a)(["\n    display: grid;\n    grid-template-columns: auto;\n    grid-template-rows: auto 40px 30px;\n    height: 100%;\n\n    grid-column-gap: 10px;\n\n    color: #cccccc;\n    font-size: 20px;\n"]))),gt=W.b.div(et||(et=Object(U.a)(["\n    grid-row: 1;\n    margin-left: 10px;\n"]))),mt=W.b.span(tt||(tt=Object(U.a)(["\n    font-weight: bold;\n    font-style: italic;\n"]))),vt=W.b.div(nt||(nt=Object(U.a)(["\n    grid-row: 2;\n\n    margin-left: 10px;\n    font-weight: bold;\n"]))),ht=W.b.span(rt||(rt=Object(U.a)(["\n    color: #f04747;\n"]))),xt=W.b.div(at||(at=Object(U.a)(["\n    grid-row: 3;\n    text-align: center;\n"]))),yt=W.b.button(ot||(ot=Object(U.a)(["\n    background: #313131;\n    border: none;\n    color: #cccccc;\n\n    padding: 5px 10px;\n    border-radius: 5px;\n\n    margin: 0px 10px;\n\n    &:hover {\n        background: #515151;\n    }\n"]))),Ot=Object(W.b)(yt)(ct||(ct=Object(U.a)(["\n    color: #f04747;\n    font-weight: bold;\n\n    &:hover {\n        background: #f04747;\n        color: #FFFFFF;\n    }\n"]))),jt=Object(W.b)(yt)(lt||(lt=Object(U.a)(["\n    color: #17831d;\n    font-weight: bold;\n\n    &:hover {\n        background: #17831d;\n        color: #FFFFFF;\n    }\n"])));function Et(e){var t=e.deleteSelection,n=e.setDeleteSelection,r=Object(g.useContext)(B),a=function(){if(t.type===b.Group){var e=r.groups[t.group];return m.a.createElement("span",null,"Are you sure you want to delete the group ",m.a.createElement(mt,null,e.name)," and all of its cards")}if(t.type===b.Card){var n=r.groups[t.group].cards[t.card];return m.a.createElement("span",null,"Are you sure you want to delete the card ",m.a.createElement(mt,null,n.name))}return m.a.createElement("span",null,"You have reached an invalid state, please press cancel")};return m.a.createElement(y.a,{isOpen:t.type!==b.None,style:ft},m.a.createElement(bt,null,m.a.createElement(gt,null,m.a.createElement(ie.a,null,a)),m.a.createElement(vt,null,"This action is ",m.a.createElement(ht,null,"irreversible")),m.a.createElement(xt,null,m.a.createElement(yt,{onClick:function(){return n({type:b.None})}},"Cancel"),m.a.createElement(Ot,{onClick:function(){t.type===b.Group?(r.select(),r.removeGroup(t.group)):t.type===b.Card?(r.select(t.group),r.groups[t.group].removeCard(t.card)):console.warn("Attempted to delete card when no card selected for deletion"),n({type:b.None})}},"Delete"))))}var wt,Ct,kt,St,Dt,At,Gt,It,Rt,Tt,Nt,Pt=n(21),zt=n(26),Mt=W.b.div(wt||(wt=Object(U.a)(["\n    display: grid;\n    grid-template-columns: auto;\n    grid-template-rows: 40px calc(100% - 60px);\n\n    grid-column-gap: 10px;\n\n    background: #313131;\n    color: #cccccc;\n\n    height: 100%;\n    overflow: hidden;\n"]))),_t=W.b.div(Ct||(Ct=Object(U.a)(["\n    grid-row: 1;\n    height: 100%;\n\n    padding: 0px 50px;\n\n    margin-left: -50px;\n\n    width: 100%;\n    box-shadow: ",";\n"])),(function(e){return e.isTop?"none":"0px 10px 10px #000000"})),Ft=W.b.div(kt||(kt=Object(U.a)(["\n    display: inline-block;\n    width: calc(100% - 60px);\n\n    margin: 8px 5px 8px 10px;\n\n    border: 1px solid transparent;\n\n    padding: 0px 3px;\n\n    background: #555555;\n"]))),Lt=W.b.input.attrs({type:"text"})(St||(St=Object(U.a)(["\n    &::-ms-clear {\n        display: none;\n    }\n    outline: none;\n\n    height: 20px;\n    width: ",";\n\n    background: transparent;\n    color: #cccccc;\n    border: none;\n\n    font-size: 15px;\n\n    padding: 0px;\n\n    display: inline-block;\n"])),(function(e){return e.short?"calc(100% - 20px)":"calc(100%)"})),Bt=W.b.div(Dt||(Dt=Object(U.a)(["\n    height: 20px;\n    font-size: 16px;\n    width: 20px;\n\n    color: #cccccc;\n    text-align: center;\n    display: ",";\n    position: relative;\n    vertical-align: text-bottom;\n\n    user-select: none;\n\n    &:hover {\n        color: #f04747;\n    }\n\n    svg {\n        position: absolute;\n\n        top: 50%;\n        left: 50%;\n\n        transform: translate(-50%, -50%);\n    }\n"])),(function(e){return!0===e.hidden?"none":"inline-block"})),Ut=W.b.div(At||(At=Object(U.a)(["\n    color: #cccccc;\n    text-align: center;\n    display: inline-block;\n    position: relative;\n\n    user-select: none;\n\n    width: 20px;\n    margin: 0 5px;\n\n    &:hover {\n        color: #43b581;\n    }\n"]))),Wt=W.b.div(Gt||(Gt=Object(U.a)(["\n    grid-row: 2;\n    user-select: none;\n\n    overflow: auto;\n    height: 100%;\n\n    padding: 10px 0px 10px 0px;\n    background: ",";\n"])),(function(e){return e.dragOver?"#ec52ec80":"none"})),Ht=W.b.span(It||(It=Object(U.a)(["\n    background: #ff440041;\n"])));var Jt,Yt=W.b.div(Rt||(Rt=Object(U.a)(["\n    padding: 0px 0px 0px 10px;\n    background: ",";\n\n    &:hover {\n        background: #414141;\n    }\n"])),(function(e){return e.selected?"#2b5c3b":"none"})),$t=W.b.div(Tt||(Tt=Object(U.a)(["\n    display: inline-block;\n    width: 20px;\n    text-align: center;\n"]))),Vt=W.b.div(Nt||(Nt=Object(U.a)(["\n    display: inline-block;\n    font-weight: bold;\n    font-size: 20px;\n"]))),Kt=W.b.div(Jt||(Jt=Object(U.a)(["\n    min-height: 20px;\n    background: ",";\n\n    &:hover {\n        background: #414141;\n    }\n\n    padding: 3px 0px 3px 30px;\n"])),(function(e){return e.selected?"#515151":"none"}));function Qt(e){return function(t){return t.name.toLowerCase().includes(e.toLowerCase())}}function qt(e){var t=e.groupId,n=e.id,r=e.search,a=Object(g.useContext)(B),o=function(){return a.select(t,n)};return Object(ie.b)((function(){var e=a.groups[t].cards[n],c=""!==r&&(a.selection.type!==b.Card||a.selection.card!==n||a.selection.group!==t)&&!Qt(r)(e);return m.a.createElement(pt,{id:"card-contextmenu",selection:{type:b.Card,card:n,group:t}},m.a.createElement(Kt,{selected:a.selection.type===b.Card&&a.selection.card===n&&a.selection.group===t,onClick:o,hidden:c},Zt(e.name,r)))}))}function Xt(e){var t=e.id,n=e.search,r=Object(g.useState)(!1),a=Object(O.a)(r,2),o=a[0],c=a[1],l=Object(g.useContext)(B),i=Object(ie.b)((function(){return""!==n&&0===l.groups[t].cards.filter(Qt(n)).length&&!l.groups[t].name.toLowerCase().includes(n.toLowerCase())&&!((l.selection.type===b.Card||l.selection.type===b.Group)&&l.selection.group===t)})),u=function(){return c(!o)};return Object(ie.b)((function(){return m.a.createElement(pt,{id:"group-contextmenu",selection:{type:b.Group,group:t}},m.a.createElement("div",{hidden:i},m.a.createElement(Yt,{selected:l.selection.type===b.Group&&l.selection.group===t,onClick:u},m.a.createElement($t,null,m.a.createElement(zt.a,{icon:o?Pt.b:Pt.a})),m.a.createElement(Vt,null,m.a.createElement(ie.a,null,(function(){return m.a.createElement(m.a.Fragment,null,Zt(l.groups[t].name,n))})))),m.a.createElement("div",{hidden:o},m.a.createElement(ie.a,null,(function(){return m.a.createElement(m.a.Fragment,null,l.groups[t].cards.map((function(e,r){return m.a.createElement(qt,{key:r,id:r,groupId:t,search:n})})))})))))}))}function Zt(e,t){return void 0!==t&&""!==t?void 0!==e&&""!==e?e.split(new RegExp("(".concat(t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),")"),"gi")).map((function(e,n){return e.toLowerCase()===t.toLowerCase()?m.a.createElement(Ht,null,e):m.a.createElement("span",{key:n},e)})):void 0:e}function en(){var e=Object(g.useState)(""),t=Object(O.a)(e,2),n=t[0],r=t[1],a=Object(g.useState)(!1),o=Object(O.a)(a,2),c=o[0],l=o[1],i=function(){var e=Object(g.useState)(!0),t=Object(O.a)(e,2),n=t[0],r=t[1];return[n,function(e){n!==(0===e.currentTarget.scrollTop)&&r(0===e.currentTarget.scrollTop)}]}(),u=Object(O.a)(i,2),s=u[0],p=u[1],d=Object(g.useContext)(B),f=function(){var e=Object(C.a)(w.a.mark((function e(t){var n,r,a;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),t.persist(),l(!1),n=0;case 4:if(!(n<t.dataTransfer.items.length)){e.next=17;break}if("application/json"!==(r=t.dataTransfer.files[n]).type&&!r.name.endsWith(".json")){e.next=13;break}return e.next=9,V(r);case 9:a=e.sent,Z(JSON.parse(a),d),e.next=14;break;case 13:console.error('Format "'.concat(r.type,'" unrecognized'));case 14:n++,e.next=4;break;case 17:t.dataTransfer.items.clear();case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return m.a.createElement(Mt,null,m.a.createElement(pt,{id:"none-contextmenu",selection:{type:b.None}},m.a.createElement(Wt,{dragOver:c,onScroll:p,onDrop:f,onDragEnter:function(){return l(!0)},onDragExit:function(){return l(!1)},onDragOver:function(e){e.preventDefault()}},m.a.createElement(ie.a,null,(function(){return m.a.createElement(m.a.Fragment,null,d.groups.map((function(e,t){return m.a.createElement(Xt,{key:t,id:t,search:n})})))})))),m.a.createElement(_t,{isTop:s},m.a.createElement(Ft,null,m.a.createElement(Lt,{short:""!==n,value:n,onChange:function(e){return r(e.target.value)}}),m.a.createElement(Bt,{hidden:""===n,onClick:function(){return r("")}},m.a.createElement(zt.a,{icon:Pt.d}))),m.a.createElement(Ut,{onClick:function(){var e=d.addGroup(new M("New Group ".concat(d.groups.length)));d.select(e)}},m.a.createElement(zt.a,{icon:Pt.c}))))}var tn,nn=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||null!==window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function rn(e){if("serviceWorker"in navigator){if(new URL("",window.location.toString()).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");nn?(!function(e,t){fetch(e).then((function(n){404===n.status||-1===n.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){return e.unregister().then((function(){window.location.reload()}))})).catch((function(e){return console.error(e)})):an(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})).catch((function(e){return console.error(e)}))):an(t,e)}))}}function an(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!==n&&(n.onstatechange=function(){"installed"===n.state&&(null!==navigator.serviceWorker.controller?(console.log("New content is available; please refresh."),t(!0)):console.log("Content is cached for offline use."))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}function on(e){var t=e.show;return m.a.createElement(y.a,{isOpen:t,style:ft},m.a.createElement(bt,null,m.a.createElement(gt,null,"A rendering task is taking place"),m.a.createElement(vt,null,"Please ",m.a.createElement(ht,null,"DO NOT")," leave the page")))}var cn=Object(W.a)(tn||(tn=Object(U.a)(['\n    body,\n    html {\n        margin: 0;\n        padding: 0;\n        font-family: \'Open Sans\', sans-serif;\n        overflow: auto;\n        width: 100%;\n        height: 100%;\n    }\n\n    @font-face {\n        font-family: "Modesto-Expd";\n        src: url("/fonts/Modesto-Expd.ttf");\n    }\n\n    @font-face {\n        font-family: "Modesto-Regular";\n        src: url("/fonts/Modesto-Regular.ttf");\n    }\n\n    @font-face {\n        font-family: "Open Sans";\n        src: url("/fonts/OpenSans-Regular.ttf");\n    }\n\n    @font-face {\n        font-family: "Open Sans SemiBold";\n        src: url("/fonts/OpenSans-SemiBold.ttf");\n    }\n'])));function ln(e){var t=e.doUpdate,n=e.show,r=function(e){return function(){return t(e)}};return m.a.createElement(y.a,{isOpen:n,style:ft},m.a.createElement(bt,null,m.a.createElement(gt,null,"There is a new update! You can choose to update now, or ignore the message."),m.a.createElement(xt,null,m.a.createElement(jt,{onClick:r(!0)},"Update"),m.a.createElement(yt,{onClick:r(!1)},"Ignore"))))}var un=Object(g.createContext)({current:null}),sn=Object(g.createContext)([!1,function(){}]);function pn(){var e=Object(g.useContext)(B),t=Object(g.useState)(!1),n=Object(O.a)(t,2),r=n[0],a=n[1],o=Object(g.useRef)(null),c=Object(g.useState)(!1),l=Object(O.a)(c,2),i=l[0],u=l[1];Object(g.useEffect)((function(){Object(j.create)({jsonify:!0,storage:localStorage})("state",e),rn(u),document.oncontextmenu=function(e){e.preventDefault()}}),[]);var s=Object(g.useState)({type:b.None}),p=Object(O.a)(s,2),d=p[0],f=p[1];return m.a.createElement(H,null,m.a.createElement(un.Provider,{value:o},m.a.createElement(sn.Provider,{value:[r,a]},m.a.createElement(cn,null),m.a.createElement(ut,null),m.a.createElement(en,null),m.a.createElement(dt,{setDeleteSelection:f}),m.a.createElement(Et,{setDeleteSelection:f,deleteSelection:d}),m.a.createElement(Qe,null),m.a.createElement(ze,{ref:o}),m.a.createElement(ln,{doUpdate:function(e){e?(console.log("%cUser accepting update, reloading","color: goldenrod"),location.reload()):console.log("%cUser ignored update","color: goldenrod"),u(!1)},show:i}),m.a.createElement(on,{show:r}))))}y.a.setAppElement("#root"),h.a.render(m.a.createElement(pn,null),document.getElementById("root"))}},[[52,1,2]]]);
//# sourceMappingURL=main.a1be40e2.chunk.js.map